"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[870],{33438(e,t,n){n.d(t,{A:()=>s});var o=n(66734),r=n(70579);const s=(0,o.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},59870(e,t,n){n.r(t),n.d(t,{default:()=>Q});var o=n(89379),r=n(65043),s=n(46946),l=n(94496),a=n(71716),i=n(72882),d=n(69392),c=n(8591),m=n(65204),x=n(26487),h=n(19955),u=n(40360),p=n(59314),f=n(98056),j=n(70352),g=n(42788),A=n(39336),b=n(83462),y=n(26600),v=n(97368),C=n(92064),S=n(59064),k=n(71861),T=n(66734),I=n(70579);const z=(0,T.A)((0,I.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft"),w=(0,T.A)((0,I.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");var D=n(36910);const N=(0,T.A)((0,I.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator");var W=n(83560),M=n(51387),P=n(70141);const H=(0,T.A)([(0,I.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,I.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule"),E=(0,T.A)((0,I.jsx)("path",{d:"M5.33 20H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h1.33c1.1 0 2 .9 2 2v12c0 1.1-.89 2-2 2M22 18V6c0-1.1-.9-2-2-2h-1.33c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2H20c1.11 0 2-.9 2-2m-7.33 0V6c0-1.1-.9-2-2-2h-1.33c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h1.33c1.1 0 2-.9 2-2"}),"ViewWeek"),O=(0,T.A)((0,I.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),L=(0,T.A)((0,I.jsx)("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange");var R=n(37141),V=n(47968),F=n(30513),K=n(33438),J=n(65239),U=n.n(J);const Y=[{id:1,name:"English",color:"#e91e63",shortName:"ENG"},{id:2,name:"Mathematics",color:"#2196f3",shortName:"MATH"},{id:3,name:"Science",color:"#4caf50",shortName:"SCI"},{id:4,name:"Social Studies",color:"#ff9800",shortName:"SS"},{id:5,name:"Hindi",color:"#9c27b0",shortName:"HIN"},{id:6,name:"Computer",color:"#00bcd4",shortName:"COMP"},{id:7,name:"Art",color:"#f44336",shortName:"ART"},{id:8,name:"Physical Education",color:"#795548",shortName:"PE"}],q=[{id:1,name:"Period 1",startTime:"08:00",endTime:"08:45"},{id:2,name:"Period 2",startTime:"08:45",endTime:"09:30"},{id:3,name:"Period 3",startTime:"09:45",endTime:"10:30"},{id:4,name:"Period 4",startTime:"10:30",endTime:"11:15"},{id:5,name:"Period 5",startTime:"11:30",endTime:"12:15"},{id:6,name:"Period 6",startTime:"12:15",endTime:"13:00"},{id:7,name:"Period 7",startTime:"14:00",endTime:"14:45"},{id:8,name:"Period 8",startTime:"14:45",endTime:"15:30"}],B=["January","February","March","April","May","June","July","August","September","October","November","December"],G=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],X=["Mon","Tue","Wed","Thu","Fri","Sat"],_=["#e91e63","#f44336","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],Q=()=>{const[e,t]=(0,r.useState)((new Date).getFullYear()),[n,T]=(0,r.useState)((new Date).getMonth()),[J,Q]=(0,r.useState)(()=>{const e=new Date,t=e.getDay(),n=0===t?-6:1-t,o=new Date(e);return o.setDate(e.getDate()+n),o.toISOString().split("T")[0]}),[Z,$]=(0,r.useState)(0),[ee,te]=(0,r.useState)(Y),[ne,oe]=(0,r.useState)(q),[re,se]=(0,r.useState)("week"),[le,ae]=(0,r.useState)(0),[ie,de]=(0,r.useState)("My School"),[ce,me]=(0,r.useState)("Class 5-A"),[xe,he]=(0,r.useState)({}),[ue,pe]=(0,r.useState)(null),[fe,je]=(0,r.useState)({open:!1,mode:"add",subject:null}),[ge,Ae]=(0,r.useState)({open:!1,mode:"add",period:null}),[be,ye]=(0,r.useState)({name:"",color:"#2196f3",shortName:""}),[ve,Ce]=(0,r.useState)({name:"",startTime:"08:00",endTime:"08:45"}),[Se,ke]=(0,r.useState)({open:!1,message:"",severity:"success"}),[Te,Ie]=(0,r.useState)(!1),[ze,we]=(0,r.useState)(""),[De,Ne]=(0,r.useState)({open:!1,subjectId:null,subjectName:""}),[We,Me]=(0,r.useState)({open:!1,type:null,dayIndex:null,periodIndex:null,dateKey:null,monthIndex:null,day:null}),[Pe,He]=(0,r.useState)(()=>{try{return JSON.parse(localStorage.getItem("microSchedulerTemplates")||"[]")}catch(e){return[]}}),[Ee,Oe]=(0,r.useState)(null),Le=(0,r.useRef)(null),Re=()=>{const e=[],t=new Date(J);for(let n=0;n<6;n++){const o=new Date(t);o.setDate(t.getDate()+n),e.push(o.toISOString().split("T")[0])}return e},Ve=()=>{const e=new Date(J);e.setDate(e.getDate()+7),Q(e.toISOString().split("T")[0])},Fe=()=>{const e=new Date(J);e.setDate(e.getDate()-7),Q(e.toISOString().split("T")[0])},Ke=()=>{const e=new Date(J),t=new Date(J);t.setDate(e.getDate()+5);const n={month:"short",day:"numeric"};return"".concat(e.toLocaleDateString("en-US",n)," - ").concat(t.toLocaleDateString("en-US",n),", ").concat(e.getFullYear())},Je=(e,t)=>new Date(t,e+1,0).getDate(),Ue=(e,t,n)=>{const o=new Date(e,t,n).getDay();return 0===o?6:o-1},Ye=(e,t)=>{const n=Je(e,t),o=Je(0===e?11:e-1,0===e?t-1:t),r=[];let s=new Array(6).fill(null);const l=Ue(t,e,1);if(0!==l&&6!==l){const n=0===e?11:e-1,r=0===e?t-1:t;for(let e=l-1;e>=0;e--){const t=o-e;s[l-1-e]={day:t,isCurrentMonth:!1,month:n,year:r}}}for(let a=1;a<=n;a++){const n=Ue(t,e,a);6!==n&&(s[n]={day:a,isCurrentMonth:!0,month:e,year:t},5===n&&(r.push(s),s=new Array(6).fill(null)))}if(s.some(e=>null!==e)){const o=11===e?0:e+1,l=11===e?t+1:t;let a=1;for(let r=0;r<6;r++)if(null===s[r]){const i=Ue(t,e,n);(r>i||6===i)&&(s[r]={day:a++,isCurrentMonth:!1,month:o,year:l})}r.push(s)}return r},qe=e=>e.preventDefault(),Be=(t,n)=>{if(!ue||!n)return;const r="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-").concat(String(n).padStart(2,"0"));he(e=>{const t=(0,o.A)({},e);return t[r]||(t[r]={}),t[r][0]=ue,t}),pe(null)},Ge=(e,t)=>{t&&Me({open:!0,type:"calendar",monthIndex:e,day:t,dayIndex:null,periodIndex:null,dateKey:null})},Xe=()=>{const e=Re(),t=new Date(J);t.setDate(t.getDate()+7),he(n=>{const r=(0,o.A)({},n);return e.forEach((e,s)=>{if(n[e]){const l=new Date(t);l.setDate(t.getDate()+s);const a=l.toISOString().split("T")[0];r[a]=(0,o.A)({},n[e])}}),r}),Q(t.toISOString().split("T")[0]),ke({open:!0,message:"Schedule copied to next week!",severity:"success"})};return(0,I.jsxs)(s.A,{sx:{display:"flex",height:"calc(100vh - 120px)",bgcolor:"#f5f5f5"},children:[(0,I.jsxs)(m.A,{sx:{width:280,display:"flex",flexDirection:"column",borderRadius:0},children:[(0,I.jsxs)(h.A,{value:le,onChange:(e,t)=>ae(t),variant:"fullWidth",children:[(0,I.jsx)(u.A,{label:"Subjects",sx:{fontSize:"0.7rem",minWidth:0}}),(0,I.jsx)(u.A,{label:"Templates",sx:{fontSize:"0.7rem",minWidth:0}}),(0,I.jsx)(u.A,{label:"Settings",sx:{fontSize:"0.7rem",minWidth:0}})]}),(0,I.jsxs)(s.A,{sx:{flex:1,overflow:"auto",p:1.5},children:[0===le&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Drag subjects to schedule"}),ee.map(e=>(0,I.jsxs)(s.A,{draggable:!0,onDragStart:()=>(e=>pe(e))(e),sx:{display:"flex",alignItems:"center",p:1,mb:1,borderRadius:1,backgroundColor:e.color,color:"#fff",cursor:"grab","&:hover":{opacity:.9},"&:active":{cursor:"grabbing"}},children:[(0,I.jsx)(N,{sx:{mr:1,fontSize:16}}),(0,I.jsx)(l.A,{variant:"body2",sx:{flex:1,fontWeight:500},children:e.name}),(0,I.jsx)(a.A,{size:"small",sx:{color:"#fff",p:.25},onClick:t=>{t.stopPropagation(),ye({name:e.name,color:e.color,shortName:e.shortName}),je({open:!0,mode:"edit",subject:e})},children:(0,I.jsx)(W.A,{fontSize:"small"})}),(0,I.jsx)(a.A,{size:"small",sx:{color:"#fff",p:.25},onClick:t=>{var n,o;t.stopPropagation(),n=e.id,o=e.name,Ne({open:!0,subjectId:n,subjectName:o})},children:(0,I.jsx)(M.A,{fontSize:"small"})})]},e.id)),(0,I.jsx)(i.A,{variant:"outlined",startIcon:(0,I.jsx)(P.A,{}),fullWidth:!0,size:"small",onClick:()=>{ye({name:"",color:"#2196f3",shortName:""}),je({open:!0,mode:"add",subject:null})},children:"Add Subject"})]}),1===le&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Your saved schedule templates"}),0===Pe.length?(0,I.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:3},children:"No templates yet. Save your first schedule!"}):Pe.map(e=>(0,I.jsxs)(p.A,{sx:{mb:1},children:[(0,I.jsxs)(f.A,{sx:{py:1,px:1.5,"&:last-child":{pb:1}},children:[(0,I.jsx)(l.A,{variant:"subtitle2",children:e.name}),(0,I.jsx)(l.A,{variant:"caption",color:"text.secondary",children:new Date(e.savedAt).toLocaleDateString()})]}),(0,I.jsxs)(j.A,{sx:{pt:0,px:1,pb:1},children:[(0,I.jsx)(i.A,{size:"small",onClick:()=>(e=>{de(e.schoolName||"My School"),me(e.className||"Class 5-A"),te(e.subjects||Y),oe(e.periods||q),he(e.weeklySchedule||e.daySchedule||{}),ke({open:!0,message:'Loaded "'.concat(e.name,'"'),severity:"success"})})(e),children:"Load"}),(0,I.jsx)(i.A,{size:"small",onClick:()=>(e=>{Oe(e),we(e.name),Ie(!0)})(e),children:"Edit"}),(0,I.jsx)(a.A,{size:"small",onClick:()=>(e=>{const t=Pe.filter(t=>t.id!==e);localStorage.setItem("microSchedulerTemplates",JSON.stringify(t)),He(t),ke({open:!0,message:"Template deleted",severity:"info"})})(e.id),children:(0,I.jsx)(M.A,{fontSize:"small"})})]})]},e.id))]}),2===le&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:"School Information"}),(0,I.jsx)(g.A,{size:"small",fullWidth:!0,label:"School Name",value:ie,onChange:e=>de(e.target.value),sx:{mb:1}}),(0,I.jsx)(g.A,{size:"small",fullWidth:!0,label:"Class / Section",value:ce,onChange:e=>me(e.target.value),sx:{mb:2}}),(0,I.jsx)(A.A,{sx:{my:1}}),(0,I.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:"Period Timings"}),(0,I.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Customize your school's period schedule"}),ne.map((e,t)=>(0,I.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:.5,mb:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:[(0,I.jsx)(H,{sx:{fontSize:16,color:"#666"}}),(0,I.jsxs)(s.A,{sx:{flex:1},children:[(0,I.jsx)(l.A,{variant:"caption",fontWeight:"bold",children:e.name}),(0,I.jsxs)(l.A,{variant:"caption",display:"block",color:"text.secondary",children:[e.startTime," - ",e.endTime]})]}),(0,I.jsx)(a.A,{size:"small",onClick:()=>{Ce({name:e.name,startTime:e.startTime,endTime:e.endTime}),Ae({open:!0,mode:"edit",period:e})},children:(0,I.jsx)(W.A,{fontSize:"small"})}),(0,I.jsx)(a.A,{size:"small",onClick:()=>{return t=e.id,oe(ne.filter(e=>e.id!==t)),void ke({open:!0,message:"Period deleted",severity:"info"});var t},children:(0,I.jsx)(M.A,{fontSize:"small"})})]},e.id)),(0,I.jsx)(i.A,{variant:"outlined",startIcon:(0,I.jsx)(P.A,{}),fullWidth:!0,size:"small",onClick:()=>{Ce({name:"Period ".concat(ne.length+1),startTime:"08:00",endTime:"08:45"}),Ae({open:!0,mode:"add",period:null})},children:"Add Period"})]})]})]}),(0,I.jsxs)(s.A,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,I.jsxs)(m.A,{sx:{p:1,borderRadius:0,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,I.jsx)(i.A,{size:"small",variant:"week"===re?"contained":"outlined",startIcon:(0,I.jsx)(E,{}),onClick:()=>se("week"),sx:"week"===re?{backgroundColor:"#1976d2",color:"#fff","&:hover":{backgroundColor:"#1565c0",color:"#fff"}}:{"&:hover":{backgroundColor:"#e3f2fd"}},children:"Week"}),(0,I.jsx)(i.A,{size:"small",variant:"month"===re?"contained":"outlined",startIcon:(0,I.jsx)(O,{}),onClick:()=>se("month"),sx:"month"===re?{backgroundColor:"#1976d2",color:"#fff","&:hover":{backgroundColor:"#1565c0",color:"#fff"}}:{"&:hover":{backgroundColor:"#e3f2fd"}},children:"Month"}),(0,I.jsx)(i.A,{size:"small",variant:"year"===re?"contained":"outlined",startIcon:(0,I.jsx)(L,{}),onClick:()=>se("year"),sx:"year"===re?{backgroundColor:"#1976d2",color:"#fff","&:hover":{backgroundColor:"#1565c0",color:"#fff"}}:{"&:hover":{backgroundColor:"#e3f2fd"}},children:"Year"}),(0,I.jsx)(A.A,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),(0,I.jsx)(i.A,{size:"small",variant:"outlined",startIcon:(0,I.jsx)(R.A,{}),onClick:()=>{Oe(null),we(""),Ie(!0)},sx:{color:"#1976d2",borderColor:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"#fff",borderColor:"#1976d2"}},children:"Save"}),(0,I.jsx)(i.A,{size:"small",variant:"outlined",startIcon:(0,I.jsx)(V.A,{}),onClick:async()=>{if(Le.current)try{const e=Le.current.querySelectorAll(".hide-on-export");e.forEach(e=>e.style.display="none");const t=await U()(Le.current,{scale:2,backgroundColor:"#ffffff"});e.forEach(e=>e.style.display="");const n=document.createElement("a");n.download="schedule-".concat(re,"-").concat(Date.now(),".png"),n.href=t.toDataURL(),n.click(),ke({open:!0,message:"Exported!",severity:"success"})}catch(e){ke({open:!0,message:"Export failed",severity:"error"})}},sx:{color:"#1976d2",borderColor:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"#fff",borderColor:"#1976d2"}},children:"Export"}),(0,I.jsx)(i.A,{size:"small",variant:"outlined",startIcon:(0,I.jsx)(F.A,{}),onClick:async()=>{if(Le.current)try{const e=Le.current.querySelectorAll(".hide-on-export");e.forEach(e=>e.style.display="none");const t=await U()(Le.current,{scale:2,backgroundColor:"#ffffff"});e.forEach(e=>e.style.display="");const n=window.open("","_blank");n&&(n.document.write("\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <title>".concat(ie," - ").concat(ce,' Schedule</title>\n            <style>\n              body { margin: 0; padding: 0; }\n              img { max-width: 100%; height: auto; display: block; }\n              @media print { \n                body { margin: 0; padding: 0; } \n                img { max-width: 100%; page-break-inside: avoid; } \n              }\n            </style>\n          </head>\n          <body>\n            <img src="').concat(t.toDataURL(),'" />\n          </body>\n          </html>\n        ')),n.document.close(),setTimeout(()=>{n.print(),n.close()},250))}catch(e){ke({open:!0,message:"Print failed",severity:"error"})}},sx:{color:"#1976d2",borderColor:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"#fff",borderColor:"#1976d2"}},children:"Print"})]}),(0,I.jsxs)(s.A,{sx:{flex:1,overflow:"auto",p:2},children:["week"===re&&(()=>{const e=Re();return(0,I.jsxs)(s.A,{ref:Le,sx:{p:{xs:1,md:2},backgroundColor:"#fff",overflow:"auto"},children:[(0,I.jsxs)(s.A,{sx:{textAlign:"center",mb:2},children:[(0,I.jsx)(l.A,{variant:"h6",sx:{fontWeight:"bold",color:"#1976d2",fontSize:{xs:"1rem",md:"1.25rem"}},children:ie}),(0,I.jsxs)(l.A,{variant:"subtitle2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"0.875rem"}},children:[ce," - Weekly Timetable"]})]}),(0,I.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:.5,md:2},mb:2,flexWrap:"wrap"},children:[(0,I.jsx)(a.A,{className:"hide-on-export",onClick:Fe,size:"small",children:(0,I.jsx)(z,{})}),(0,I.jsx)(l.A,{variant:"h6",sx:{fontWeight:"bold",minWidth:{xs:180,md:250},textAlign:"center",fontSize:{xs:"0.85rem",md:"1.25rem"}},children:Ke()}),(0,I.jsx)(a.A,{className:"hide-on-export",onClick:Ve,size:"small",children:(0,I.jsx)(w,{})}),(0,I.jsx)(i.A,{className:"hide-on-export",size:"small",variant:"outlined",onClick:Xe,startIcon:(0,I.jsx)(D.A,{}),sx:{fontSize:{xs:"0.65rem",md:"0.875rem"},display:{xs:"none",sm:"inline-flex"}},children:"Copy to Next"})]}),(0,I.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:{xs:"60px repeat(6, 1fr)",md:"100px repeat(6, 1fr)"},gap:"2px",overflowX:"auto"},children:[(0,I.jsx)(s.A,{sx:{p:{xs:.5,md:1},backgroundColor:"#1976d2",color:"#fff",fontWeight:"bold",textAlign:"center",fontSize:{xs:"0.65rem",md:"0.875rem"}},children:"Time"}),X.map((t,n)=>{const o=new Date(e[n]);return(0,I.jsxs)(s.A,{sx:{p:{xs:.5,md:1},backgroundColor:"#1976d2",color:"#fff",fontWeight:"bold",textAlign:"center"},children:[(0,I.jsx)("div",{style:{fontSize:"inherit"},children:t}),(0,I.jsxs)("div",{style:{fontSize:"0.6rem",opacity:.8},children:[o.getDate(),"/",o.getMonth()+1]})]},t)}),ne.map((e,t)=>(0,I.jsxs)(r.Fragment,{children:[(0,I.jsxs)(s.A,{sx:{p:{xs:.5,md:1},backgroundColor:"#e3f2fd",fontSize:{xs:"0.55rem",md:"0.7rem"},textAlign:"center"},children:[(0,I.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),(0,I.jsxs)("div",{style:{fontSize:"0.5rem",color:"#666"},children:[e.startTime,"-",e.endTime]})]}),G.map((e,n)=>{const r=((e,t)=>{var n;const o=Re()[e];return(null===(n=xe[o])||void 0===n?void 0:n[t])||null})(n,t);return(0,I.jsx)(s.A,{onDragOver:qe,onDrop:()=>((e,t)=>{if(!ue)return;const n=Re()[e];he(e=>{const r=(0,o.A)({},e);return r[n]||(r[n]={}),r[n][t]=ue,r}),pe(null)})(n,t),onClick:()=>r&&void Me({open:!0,type:"period",dayIndex:n,periodIndex:t,dateKey:null,monthIndex:null,day:null}),sx:{p:{xs:.25,md:1},backgroundColor:r?r.color:"#fafafa",color:r?"#fff":"#999",textAlign:"center",cursor:"pointer",minHeight:{xs:35,md:50},display:"flex",alignItems:"center",justifyContent:"center",fontSize:{xs:"0.55rem",md:"0.75rem"},fontWeight:r?"bold":"normal",transition:"all 0.2s","&:hover":{opacity:.8}},children:r?r.shortName:"+"},n)})]},t))]})]})})(),"month"===re&&(()=>{const t=Ye(n,e);return(0,I.jsxs)(s.A,{ref:Le,sx:{p:2,backgroundColor:"#fff"},children:[(0,I.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2},children:[(0,I.jsx)(d.A,{title:"Previous Month",children:(0,I.jsx)(a.A,{className:"hide-on-export",onClick:()=>T(e=>0===e?11:e-1),children:(0,I.jsx)(z,{})})}),(0,I.jsx)(d.A,{title:"".concat(B[n]," ").concat(e),children:(0,I.jsxs)(l.A,{variant:"h5",sx:{fontWeight:"bold",minWidth:200,textAlign:"center",cursor:"default"},children:[B[n]," ",e]})}),(0,I.jsx)(d.A,{title:"Next Month",children:(0,I.jsx)(a.A,{className:"hide-on-export",onClick:()=>T(e=>11===e?0:e+1),children:(0,I.jsx)(w,{})})})]}),(0,I.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:1},children:[X.map(e=>(0,I.jsx)(s.A,{sx:{p:1,textAlign:"center",fontWeight:"bold",backgroundColor:"#e3f2fd"},children:e},e)),t.map((t,o)=>t.map((t,r)=>{const a=t?"object"===typeof t?t.day:t:null,i=t&&"object"===typeof t?t.month:n,d=t&&"object"===typeof t?t.year:e,c=!t||"object"!==typeof t||t.isCurrentMonth,m=a?"".concat(d,"-").concat(String(i+1).padStart(2,"0"),"-").concat(String(a).padStart(2,"0")):null,x=m?(e=>{const t=xe[e];return t?Object.keys(t).sort().map(e=>t[e]).filter(Boolean):[]})(m):[],h=x.length>0;return(0,I.jsx)(s.A,{onDragOver:qe,onDrop:()=>a&&Be(i,a),onClick:()=>h&&Ge(i,a),sx:{p:.5,minHeight:70,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:a?c?"#fff":"#f9f9f9":"#f5f5f5",cursor:a?"pointer":"default",opacity:c?1:.6,"&:hover":a?{boxShadow:2}:{},display:"flex",flexDirection:"column"},children:a&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.A,{variant:"caption",sx:{fontWeight:"bold",color:c?"#333":"#999",mb:.5},children:a}),(0,I.jsxs)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:.25,flex:1},children:[x.slice(0,4).map((e,t)=>(0,I.jsx)(s.A,{sx:{backgroundColor:e.color,color:"#fff",fontSize:"0.55rem",px:.5,py:.25,borderRadius:.5,lineHeight:1},children:e.shortName},t)),x.length>4&&(0,I.jsxs)(l.A,{variant:"caption",sx:{fontSize:"0.5rem",color:"#666"},children:["+",x.length-4]})]})]})},"".concat(o,"-").concat(r))}))]})]})})(),"year"===re&&(0,I.jsxs)(s.A,{ref:Le,sx:{p:2,backgroundColor:"#fff"},children:[(0,I.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2},children:[(0,I.jsx)(a.A,{className:"hide-on-export",onClick:()=>t(e=>e-1),children:(0,I.jsx)(z,{})}),(0,I.jsxs)(l.A,{variant:"h5",sx:{fontWeight:"bold"},children:["Academic Year ",e]}),(0,I.jsx)(a.A,{className:"hide-on-export",onClick:()=>t(e=>e+1),children:(0,I.jsx)(w,{})})]}),(0,I.jsx)(c.Ay,{container:!0,spacing:2,children:B.map((t,n)=>{const o=Ye(n,e);return(0,I.jsx)(c.Ay,{item:!0,xs:6,sm:4,md:3,children:(0,I.jsxs)(m.A,{sx:{p:1},children:[(0,I.jsx)(l.A,{variant:"subtitle2",sx:{textAlign:"center",fontWeight:"bold",color:"#1976d2",mb:.5},children:t}),(0,I.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"1px",fontSize:"0.55rem"},children:[X.map(e=>(0,I.jsx)(s.A,{sx:{textAlign:"center",fontWeight:"bold",color:"#666",py:.25},children:e.charAt(0)},e)),o.map((t,o)=>t.map((t,r)=>{const l=t?"object"===typeof t?t.day:t:null,a=t&&"object"===typeof t?t.month:n,i=t&&"object"===typeof t?t.year:e,d=!t||"object"!==typeof t||t.isCurrentMonth,c=l?"".concat(i,"-").concat(String(a+1).padStart(2,"0"),"-").concat(String(l).padStart(2,"0")):null,m=c?(e=>{const t=xe[e];if(!t)return null;const n=Object.keys(t).sort();return n.length>0?t[n[0]]:null})(c):null;return(0,I.jsxs)(s.A,{onDragOver:qe,onDrop:()=>l&&Be(a,l),onClick:()=>m&&Ge(a,l),sx:{height:16,backgroundColor:m?m.color:l?d?"#fafafa":"#e8e8e8":"#f0f0f0",borderRadius:"2px",cursor:l?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",color:m?"#fff":d?"#333":"#999",fontSize:"0.5rem",opacity:d?1:.6},children:[l&&!m&&l,m&&m.shortName.charAt(0)]},"".concat(o,"-").concat(r))}))]})]})},n)})}),(0,I.jsx)(s.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center"},children:ee.map(e=>(0,I.jsx)(x.A,{label:e.name,size:"small",sx:{backgroundColor:e.color,color:"#fff"}},e.id))})]})]})]}),(0,I.jsxs)(b.A,{open:fe.open,onClose:()=>je({open:!1,mode:"add",subject:null}),maxWidth:"sm",fullWidth:!0,children:[(0,I.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["add"===fe.mode?"Add Subject":"Edit Subject",(0,I.jsx)(a.A,{onClick:()=>je({open:!1,mode:"add",subject:null}),size:"small",children:(0,I.jsx)(K.A,{})})]}),(0,I.jsxs)(v.A,{sx:{maxHeight:"60vh",overflow:"auto"},children:[(0,I.jsx)(g.A,{autoFocus:!0,margin:"dense",label:"Subject Name",fullWidth:!0,value:be.name,onChange:e=>ye((0,o.A)((0,o.A)({},be),{},{name:e.target.value.substring(0,30)})),sx:{mb:2},inputProps:{maxLength:30},helperText:"".concat(be.name.length,"/30 characters")}),(0,I.jsx)(g.A,{margin:"dense",label:"Short Name (4 chars)",fullWidth:!0,value:be.shortName,onChange:e=>ye((0,o.A)((0,o.A)({},be),{},{shortName:e.target.value.toUpperCase().substring(0,4)})),sx:{mb:2},inputProps:{maxLength:4}}),(0,I.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:"Color"}),(0,I.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:_.map(e=>(0,I.jsx)(s.A,{onClick:()=>ye((0,o.A)((0,o.A)({},be),{},{color:e})),sx:{width:28,height:28,backgroundColor:e,borderRadius:1,cursor:"pointer",border:be.color===e?"3px solid #000":"1px solid #ccc","&:hover":{transform:"scale(1.1)"}}},e))})]}),(0,I.jsxs)(C.A,{sx:{p:2,gap:1,borderTop:"1px solid #e0e0e0"},children:[(0,I.jsx)(i.A,{onClick:()=>je({open:!1,mode:"add",subject:null}),variant:"outlined",size:"large",children:"Cancel"}),(0,I.jsx)(i.A,{onClick:()=>{if(be.name.trim()){if("add"===fe.mode){const e={id:Date.now(),name:be.name,color:be.color,shortName:be.shortName||be.name.substring(0,4).toUpperCase()};te([...ee,e])}else te(ee.map(e=>e.id===fe.subject.id?(0,o.A)((0,o.A)({},e),{},{name:be.name,color:be.color,shortName:be.shortName}):e));je({open:!1,mode:"add",subject:null}),ye({name:"",color:"#2196f3",shortName:""}),ke({open:!0,message:"add"===fe.mode?"Subject added!":"Subject updated!",severity:"success"})}else ke({open:!0,message:"Subject name is required",severity:"error"})},variant:"contained",color:"primary",size:"large",sx:{fontWeight:"bold",minWidth:100,backgroundColor:"#1976d2",color:"#fff","&:hover":{backgroundColor:"#1565c0",color:"#fff"}},children:"Save"})]})]}),(0,I.jsxs)(b.A,{open:ge.open,onClose:()=>Ae({open:!1,mode:"add",period:null}),maxWidth:"sm",fullWidth:!0,children:[(0,I.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["add"===ge.mode?"Add Period":"Edit Period",(0,I.jsx)(a.A,{onClick:()=>Ae({open:!1,mode:"add",period:null}),size:"small",children:(0,I.jsx)(K.A,{})})]}),(0,I.jsxs)(v.A,{sx:{maxHeight:"60vh",overflow:"auto"},children:[(0,I.jsx)(g.A,{autoFocus:!0,margin:"dense",label:"Period Name",fullWidth:!0,value:ve.name,onChange:e=>Ce((0,o.A)((0,o.A)({},ve),{},{name:e.target.value.substring(0,20)})),sx:{mb:2},inputProps:{maxLength:20},helperText:"".concat(ve.name.length,"/20 characters")}),(0,I.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,I.jsx)(c.Ay,{item:!0,xs:6,children:(0,I.jsx)(g.A,{type:"time",label:"Start Time",fullWidth:!0,value:ve.startTime,onChange:e=>Ce((0,o.A)((0,o.A)({},ve),{},{startTime:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,I.jsx)(c.Ay,{item:!0,xs:6,children:(0,I.jsx)(g.A,{type:"time",label:"End Time",fullWidth:!0,value:ve.endTime,onChange:e=>Ce((0,o.A)((0,o.A)({},ve),{},{endTime:e.target.value})),InputLabelProps:{shrink:!0}})})]})]}),(0,I.jsxs)(C.A,{sx:{p:2,gap:1,borderTop:"1px solid #e0e0e0"},children:[(0,I.jsx)(i.A,{onClick:()=>Ae({open:!1,mode:"add",period:null}),variant:"outlined",size:"large",children:"Cancel"}),(0,I.jsx)(i.A,{onClick:()=>{if(!ve.name.trim())return void ke({open:!0,message:"Period name is required",severity:"error"});if(ve.startTime>=ve.endTime)return void ke({open:!0,message:"End time must be after start time",severity:"error"});("add"===ge.mode?ne:ne.filter(e=>{var t;return e.id!==(null===(t=ge.period)||void 0===t?void 0:t.id)})).some(e=>{const t=ve.startTime,n=ve.endTime,o=e.startTime;return t<e.endTime&&n>o})?ke({open:!0,message:"This time slot overlaps with an existing period",severity:"error"}):("add"===ge.mode?oe([...ne,(0,o.A)({id:Date.now()},ve)]):oe(ne.map(e=>e.id===ge.period.id?(0,o.A)((0,o.A)({},e),ve):e)),Ae({open:!1,mode:"add",period:null}),Ce({name:"",startTime:"08:00",endTime:"08:45"}),ke({open:!0,message:"add"===ge.mode?"Period added!":"Period updated!",severity:"success"}))},variant:"contained",color:"primary",size:"large",sx:{fontWeight:"bold",minWidth:100,backgroundColor:"#1976d2",color:"#fff","&:hover":{backgroundColor:"#1565c0",color:"#fff"}},children:"Save"})]})]}),(0,I.jsxs)(b.A,{open:Te,onClose:()=>{Ie(!1),Oe(null)},children:[(0,I.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Ee?"Edit Template":"Save as Template",(0,I.jsx)(a.A,{onClick:()=>{Ie(!1),Oe(null)},size:"small",children:(0,I.jsx)(K.A,{})})]}),(0,I.jsx)(v.A,{children:(0,I.jsx)(g.A,{autoFocus:!0,margin:"dense",label:"Template Name",fullWidth:!0,value:ze,onChange:e=>we(e.target.value),placeholder:"e.g., Class 5A Timetable"})}),(0,I.jsxs)(C.A,{children:[(0,I.jsx)(i.A,{onClick:()=>{Ie(!1),Oe(null)},children:"Cancel"}),(0,I.jsx)(i.A,{onClick:()=>{if(!ze.trim())return void ke({open:!0,message:"Please enter a name",severity:"error"});const e={id:(null===Ee||void 0===Ee?void 0:Ee.id)||Date.now(),name:ze,schoolName:ie,className:ce,subjects:ee,periods:ne,weeklySchedule:xe,savedAt:(new Date).toISOString()};let t;t=Ee?Pe.map(t=>t.id===Ee.id?e:t):[...Pe.filter(e=>e.name!==ze),e],localStorage.setItem("microSchedulerTemplates",JSON.stringify(t)),He(t),Ie(!1),we(""),Oe(null),ke({open:!0,message:'Template "'.concat(ze,'" saved!'),severity:"success"})},variant:"contained",color:"primary",sx:{fontWeight:"bold",backgroundColor:"#1976d2",color:"#fff","&:hover":{backgroundColor:"#1565c0",color:"#fff"}},children:"Save"})]})]}),(0,I.jsxs)(b.A,{open:De.open,onClose:()=>Ne({open:!1,subjectId:null,subjectName:""}),children:[(0,I.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Confirm Delete",(0,I.jsx)(a.A,{onClick:()=>Ne({open:!1,subjectId:null,subjectName:""}),size:"small",children:(0,I.jsx)(K.A,{})})]}),(0,I.jsx)(v.A,{children:(0,I.jsxs)(l.A,{children:['Are you sure you want to delete the subject "',(0,I.jsx)("strong",{children:De.subjectName}),'"? This action cannot be undone.']})}),(0,I.jsxs)(C.A,{sx:{p:2,gap:1},children:[(0,I.jsx)(i.A,{onClick:()=>Ne({open:!1,subjectId:null,subjectName:""}),variant:"outlined",children:"Cancel"}),(0,I.jsx)(i.A,{onClick:()=>{De.subjectId&&(te(ee.filter(e=>e.id!==De.subjectId)),ke({open:!0,message:"Subject deleted",severity:"info"})),Ne({open:!1,subjectId:null,subjectName:""})},variant:"contained",color:"error",children:"Delete"})]})]}),(0,I.jsxs)(b.A,{open:We.open,onClose:()=>Me({open:!1,type:null,dayIndex:null,periodIndex:null,dateKey:null,monthIndex:null,day:null}),children:[(0,I.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:["Remove Subject",(0,I.jsx)(a.A,{onClick:()=>Me({open:!1,type:null,dayIndex:null,periodIndex:null,dateKey:null,monthIndex:null,day:null}),size:"small",children:(0,I.jsx)(K.A,{})})]}),(0,I.jsx)(v.A,{children:(0,I.jsxs)(l.A,{children:["Are you sure you want to remove ","period"===We.type?"this subject from this period":"all subjects from this day","?"]})}),(0,I.jsxs)(C.A,{sx:{p:2,gap:1},children:[(0,I.jsx)(i.A,{onClick:()=>Me({open:!1,type:null,dayIndex:null,periodIndex:null,dateKey:null,monthIndex:null,day:null}),variant:"outlined",children:"Cancel"}),(0,I.jsx)(i.A,{onClick:()=>{"period"===We.type?(()=>{const{dayIndex:e,periodIndex:t}=We,n=Re()[e];he(e=>{const r=(0,o.A)({},e);return r[n]&&(delete r[n][t],0===Object.keys(r[n]).length&&delete r[n]),r}),Me({open:!1,type:null,dayIndex:null,periodIndex:null,dateKey:null,monthIndex:null,day:null})})():(()=>{const{monthIndex:t,day:n}=We,r="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-").concat(String(n).padStart(2,"0"));he(e=>{const t=(0,o.A)({},e);return delete t[r],t}),Me({open:!1,type:null,dayIndex:null,periodIndex:null,dateKey:null,monthIndex:null,day:null})})()},variant:"contained",color:"error",sx:{backgroundColor:"#d32f2f",color:"#ffffff","&:hover":{backgroundColor:"#b71c1c",color:"#ffffff"}},children:"Remove"})]})]}),(0,I.jsx)(S.A,{open:Se.open,autoHideDuration:3e3,onClose:()=>ke((0,o.A)((0,o.A)({},Se),{},{open:!1})),children:(0,I.jsx)(k.A,{severity:Se.severity,children:Se.message})})]})}},70141(e,t,n){n.d(t,{A:()=>s});var o=n(66734),r=n(70579);const s=(0,o.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},83560(e,t,n){n.d(t,{A:()=>s});var o=n(66734),r=n(70579);const s=(0,o.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=870.714b7687.chunk.js.map