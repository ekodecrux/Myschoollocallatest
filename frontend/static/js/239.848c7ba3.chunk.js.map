{"version":3,"file":"static/js/239.848c7ba3.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Rectangle.js","../node_modules/@mui/icons-material/esm/Circle.js","../node_modules/@mui/icons-material/esm/ChangeHistory.js","../node_modules/@mui/icons-material/esm/Star.js","../node_modules/@mui/icons-material/esm/Straighten.js","../node_modules/@mui/icons-material/esm/TextFields.js","../node_modules/@mui/icons-material/esm/Upload.js","../node_modules/@mui/icons-material/esm/NoteAdd.js","../node_modules/@mui/icons-material/esm/Undo.js","../node_modules/@mui/icons-material/esm/Redo.js","../node_modules/@mui/icons-material/esm/ZoomOut.js","../node_modules/@mui/icons-material/esm/ZoomIn.js","../node_modules/@mui/icons-material/esm/GridOn.js","../node_modules/@mui/icons-material/esm/FolderOpen.js","../node_modules/@mui/icons-material/esm/FormatBold.js","../node_modules/@mui/icons-material/esm/FormatItalic.js","../node_modules/@mui/icons-material/esm/FormatAlignLeft.js","../node_modules/@mui/icons-material/esm/FormatAlignCenter.js","../node_modules/@mui/icons-material/esm/FormatAlignRight.js","../node_modules/@mui/icons-material/esm/FlipToFront.js","../node_modules/@mui/icons-material/esm/FlipToBack.js","../node_modules/@mui/icons-material/esm/Lock.js","../node_modules/@mui/icons-material/esm/LockOpen.js","components/makers/shared/utils/constants.js","components/makers/shared/UnifiedMaker.jsx","components/makers/shared/utils/helpers.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M2 4h20v16H2z\"\n}), 'Rectangle');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2\"\n}), 'Circle');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 7.77 18.39 18H5.61zM12 4 2 20h20z\"\n}), 'ChangeHistory');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"\n}), 'Star');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2z\"\n}), 'Straighten');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M2.5 4v3h5v12h3V7h5V4zm19 5h-9v3h3v7h3v-7h3z\"\n}), 'TextFields');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z\"\n}), 'Upload');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z\"\n}), 'NoteAdd');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8\"\n}), 'Undo');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z\"\n}), 'Redo');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z\"\n}), 'ZoomOut');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14\"\n}, \"0\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z\"\n}, \"1\")], 'ZoomIn');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z\"\n}), 'GridOn');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z\"\n}), 'FolderOpen');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42M10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5\"\n}), 'FormatBold');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\"\n}), 'FormatItalic');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15 15H3v2h12zm0-8H3v2h12zM3 13h18v-2H3zm0 8h18v-2H3zM3 3v2h18V3z\"\n}), 'FormatAlignLeft');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M7 15v2h10v-2zm-4 6h18v-2H3zm0-8h18v-2H3zm4-6v2h10V7zM3 3v2h18V3z\"\n}), 'FormatAlignCenter');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 21h18v-2H3zm6-4h12v-2H9zm-6-4h18v-2H3zm6-4h12V7H9zM3 3v2h18V3z\"\n}), 'FormatAlignRight');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 13h2v-2H3zm0 4h2v-2H3zm2 4v-2H3c0 1.1.89 2 2 2M3 9h2V7H3zm12 12h2v-2h-2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 12H9V5h10zm-8 6h2v-2h-2zm-4 0h2v-2H7z\"\n}), 'FlipToFront');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 7H7v2h2zm0 4H7v2h2zm0-8c-1.11 0-2 .9-2 2h2zm4 12h-2v2h2zm6-12v2h2c0-1.1-.9-2-2-2m-6 0h-2v2h2zM9 17v-2H7c0 1.1.89 2 2 2m10-4h2v-2h-2zm0-4h2V7h-2zm0 8c1.1 0 2-.9 2-2h-2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5zm10-2h2V3h-2zm0 12h2v-2h-2z\"\n}), 'FlipToBack');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z\"\n}), 'Lock');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z\"\n}), 'LockOpen');","/**\n * Constants for UnifiedMaker component\n */\n\n// Element Types\nexport const ELEMENT_TYPES = {\n  TEXT: 'text',\n  IMAGE: 'image',\n  RECTANGLE: 'rectangle',\n  CIRCLE: 'circle',\n  TRIANGLE: 'triangle',\n  LINE: 'line',\n  STAR: 'star',\n  ARROW: 'arrow'\n};\n\n// Page Sizes\nexport const PAGE_SIZES = {\n  'A3': { width: 842, height: 1191, label: 'A3 (297420mm)' },\n  'A4': { width: 595, height: 842, label: 'A4 (210297mm)' },\n  'A5': { width: 420, height: 595, label: 'A5 (148210mm)' },\n  'Letter': { width: 612, height: 792, label: 'Letter (8.511\")' },\n  'Square': { width: 600, height: 600, label: 'Square (600600)' },\n  'Social': { width: 1080, height: 1080, label: 'Social (10801080)' },\n  'Custom': { width: 800, height: 600, label: 'Custom' }\n};\n\n// Color Presets\nexport const COLOR_PRESETS = [\n  '#000000', '#ffffff', '#f44336', '#e91e63', '#9c27b0', '#673ab7',\n  '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50',\n  '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722'\n];\n\n// Font Families\nexport const FONTS = [\n  'Arial', 'Helvetica', 'Times New Roman', 'Georgia', 'Verdana',\n  'Trebuchet MS', 'Comic Sans MS', 'Impact', 'Courier New', 'Roboto'\n];\n\n// Image Bank Categories\nexport const IMAGE_BANK_CATEGORIES = [\n  'ANIMALS', 'BIRDS', 'FRUITS', 'VEGETABLES', 'FLOWERS',\n  'FESTIVALS', 'PROFESSIONS', 'VEHICLES', 'EXPRESSIONS',\n  'GOOD MANNERS', 'HABITS', 'INSECTS', 'PLANTS', 'POLLUTION'\n];\n\n// Default element properties\nexport const DEFAULT_ELEMENT_PROPS = {\n  text: {\n    content: 'Enter text here',\n    fontSize: 24,\n    fontFamily: 'Arial',\n    fill: '#000000',\n    bold: false,\n    italic: false,\n    align: 'left',\n    width: 200,\n    height: 40\n  },\n  rectangle: {\n    fill: '#2196f3',\n    stroke: '#000000',\n    strokeWidth: 1,\n    width: 120,\n    height: 80\n  },\n  circle: {\n    fill: '#4caf50',\n    stroke: '#000000',\n    strokeWidth: 1,\n    width: 80,\n    height: 80\n  },\n  triangle: {\n    fill: '#ff9800',\n    stroke: '#000000',\n    strokeWidth: 1,\n    width: 100,\n    height: 100\n  },\n  star: {\n    fill: '#ffc107',\n    stroke: '#000000',\n    strokeWidth: 1,\n    width: 100,\n    height: 100\n  },\n  line: {\n    stroke: '#000000',\n    strokeWidth: 2,\n    width: 150,\n    height: 2\n  },\n  arrow: {\n    stroke: '#000000',\n    strokeWidth: 2,\n    width: 150,\n    height: 2\n  },\n  image: {\n    width: 150,\n    height: 150\n  }\n};\n","import React, { useState, useRef, useEffect, useCallback, forwardRef, useImperativeHandle } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box, Paper, Typography, Button, IconButton, Grid, Card, CardMedia,\n  TextField, Tooltip, Snackbar, Alert, Divider, Dialog, DialogTitle,\n  DialogContent, DialogActions, Tabs, Tab, Slider, FormControl,\n  InputLabel, Select, MenuItem, CircularProgress, ToggleButton,\n  ToggleButtonGroup, Popover, List, ListItem, ListItemText, ListItemSecondaryAction\n} from '@mui/material';\nimport {\n  Undo as UndoIcon, Redo as RedoIcon, Save as SaveIcon, Download as DownloadIcon,\n  Delete as DeleteIcon, Add as AddIcon, TextFields as TextIcon, Image as ImageIcon,\n  Rectangle as RectangleIcon, Circle as CircleIcon, ZoomIn as ZoomInIcon,\n  ZoomOut as ZoomOutIcon, FormatBold as BoldIcon, FormatItalic as ItalicIcon,\n  FormatAlignLeft as AlignLeftIcon, FormatAlignCenter as AlignCenterIcon,\n  FormatAlignRight as AlignRightIcon, ContentCopy as CopyIcon, Palette as PaletteIcon,\n  RotateRight as RotateIcon, FlipToFront as BringFrontIcon, FlipToBack as SendBackIcon,\n  GridOn as GridIcon, Lock as LockIcon, LockOpen as UnlockIcon, Star as StarIcon,\n  ChangeHistory as TriangleIcon, Clear as ClearIcon, Search as SearchIcon,\n  Print as PrintIcon, FolderOpen as LoadIcon, Upload as UploadIcon,\n  Straighten as LineIcon, ArrowForward as ArrowIcon, NoteAdd as NewIcon\n} from '@mui/icons-material';\nimport html2canvas from 'html2canvas';\n\n// Import extracted constants and utilities\nimport { \n  ELEMENT_TYPES, \n  PAGE_SIZES, \n  COLOR_PRESETS, \n  FONTS, \n  IMAGE_BANK_CATEGORIES \n} from './utils/constants';\nimport { imageUrlToBase64, generateId } from './utils/helpers';\n\nconst UnifiedMaker = forwardRef(({ \n  makerType = 'chart', // 'chart', 'story', 'worksheet'\n  templates = [],\n  onSave,\n  onLoad \n}, ref) => {\n  // Auth State from Redux\n  const { isLoggedin, accessToken } = useSelector((state) => state.login);\n  const navigate = useNavigate();\n  \n  // Canvas State\n  const [pageSize, setPageSize] = useState('A4');\n  const [customSize, setCustomSize] = useState({ width: 800, height: 600 });\n  const [canvasBg, setCanvasBg] = useState('#ffffff');\n  const [zoom, setZoom] = useState(80);\n  const [showGrid, setShowGrid] = useState(false);\n  \n  // Elements State\n  const [elements, setElements] = useState([]);\n  const [selectedElement, setSelectedElement] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  \n  // Drag State\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [dragElementStart, setDragElementStart] = useState({ x: 0, y: 0 });\n  const wasDraggingRef = useRef(false);  // Track if we just finished dragging\n  \n  // Resize State\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizeHandle, setResizeHandle] = useState(null); // 'nw', 'ne', 'sw', 'se', 'n', 's', 'e', 'w'\n  const [resizeStart, setResizeStart] = useState({ x: 0, y: 0, width: 0, height: 0, elementX: 0, elementY: 0 });\n  \n  // UI State\n  const [leftTab, setLeftTab] = useState(0);\n  const [colorPickerAnchor, setColorPickerAnchor] = useState(null);\n  const [colorPickerTarget, setColorPickerTarget] = useState(null);\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' });\n  \n  // Save/Load State\n  const [saveDialog, setSaveDialog] = useState(false);\n  const [loadDialog, setLoadDialog] = useState(false);\n  const [designName, setDesignName] = useState('');\n  const [savedDesigns, setSavedDesigns] = useState([]);\n  const [templatesLoading, setTemplatesLoading] = useState(false);\n  \n  // Image Bank State\n  const [imageBankImages, setImageBankImages] = useState([]);\n  const [imageBankCategory, setImageBankCategory] = useState('ANIMALS');\n  const [imageBankLoading, setImageBankLoading] = useState(false);\n  const [imageBankSearch, setImageBankSearch] = useState('');\n  \n  // Refs\n  const canvasRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const fileInputRefImages = useRef(null);  // Separate ref for Images tab\n  \n  // Get canvas dimensions\n  const getCanvasSize = () => {\n    if (pageSize === 'Custom') {\n      return customSize;\n    }\n    return PAGE_SIZES[pageSize] || PAGE_SIZES['A4'];\n  };\n  \n  // Fetch templates from backend API\n  const fetchTemplates = useCallback(async () => {\n    if (!isLoggedin || !accessToken) return;\n    \n    setTemplatesLoading(true);\n    try {\n      const backendUrl = process.env.REACT_APP_BACKEND_URL;\n      const response = await fetch(`${backendUrl}/api/rest/templates/list?makerType=${makerType}`, {\n        headers: { Authorization: `Bearer ${accessToken}` }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSavedDesigns(data.templates || []);\n      }\n    } catch (error) {\n      console.error('Error fetching templates:', error);\n    }\n    setTemplatesLoading(false);\n  }, [isLoggedin, accessToken, makerType]);\n  \n  // Load templates on mount and when auth changes\n  useEffect(() => {\n    fetchTemplates();\n  }, [fetchTemplates]);\n  \n  // Fetch Image Bank images\n  const fetchImageBankImages = useCallback(async (searchTerm = '') => {\n    if (!searchTerm || searchTerm.length < 2) {\n      setImageBankImages([]);\n      return;\n    }\n    setImageBankLoading(true);\n    try {\n      const backendUrl = process.env.REACT_APP_BACKEND_URL;\n      // Use global search API to search across all images\n      const response = await fetch(`${backendUrl}/api/rest/search/global?query=${encodeURIComponent(searchTerm)}&size=50`);\n      if (response.ok) {\n        const data = await response.json();\n        // Get all image results\n        let images = (data.results || [])\n          .map(item => item.path)\n          .filter(url => url && (\n            url.toLowerCase().endsWith('.jpg') || \n            url.toLowerCase().endsWith('.png') || \n            url.toLowerCase().endsWith('.jpeg') || \n            url.toLowerCase().endsWith('.gif')\n          ));\n        setImageBankImages(images);\n      }\n    } catch (error) {\n      console.error('Error fetching images:', error);\n    }\n    setImageBankLoading(false);\n  }, []);\n  \n  // Load Image Bank when search term changes (with debounce)\n  useEffect(() => {\n    if (leftTab === 2) {\n      const debounceTimer = setTimeout(() => {\n        fetchImageBankImages(imageBankSearch);\n      }, 500);  // 500ms debounce\n      return () => clearTimeout(debounceTimer);\n    }\n  }, [imageBankSearch, leftTab, fetchImageBankImages]);\n\n  // Keyboard event handling for moving selected elements\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (!selectedElement || selectedElement.locked) return;\n      \n      // Don't interfere with text input\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.isContentEditable) {\n        return;\n      }\n      \n      const MOVE_STEP = e.shiftKey ? 10 : 1; // Hold Shift for faster movement\n      let newX = selectedElement.x;\n      let newY = selectedElement.y;\n      let moved = false;\n      \n      switch (e.key) {\n        case 'ArrowUp':\n          newY = selectedElement.y - MOVE_STEP;\n          moved = true;\n          e.preventDefault();\n          break;\n        case 'ArrowDown':\n          newY = selectedElement.y + MOVE_STEP;\n          moved = true;\n          e.preventDefault();\n          break;\n        case 'ArrowLeft':\n          newX = selectedElement.x - MOVE_STEP;\n          moved = true;\n          e.preventDefault();\n          break;\n        case 'ArrowRight':\n          newX = selectedElement.x + MOVE_STEP;\n          moved = true;\n          e.preventDefault();\n          break;\n        case 'Delete':\n        case 'Backspace':\n          if (!e.target.tagName.match(/INPUT|TEXTAREA/)) {\n            deleteElement(selectedElement.id);\n            e.preventDefault();\n          }\n          break;\n        case 'Escape':\n          setSelectedElement(null);\n          e.preventDefault();\n          break;\n        default:\n          break;\n      }\n      \n      if (moved) {\n        updateElement(selectedElement.id, { x: newX, y: newY });\n        // Save to history after movement stops (debounced would be better, but this works)\n      }\n    };\n    \n    // Add event listener to window\n    window.addEventListener('keydown', handleKeyDown);\n    \n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [selectedElement, elements]);\n\n  // History Management (must be defined before drag handlers that use it)\n  const saveToHistory = useCallback((newElements) => {\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push(JSON.stringify(newElements));\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  }, [history, historyIndex]);\n\n  // Mouse drag handlers for moving elements\n  const handleMouseDown = (e, element) => {\n    // Don't start dragging if we're already resizing\n    if (isResizing) return;\n    e.stopPropagation();\n    // Always allow selection (so user can click unlock button)\n    setSelectedElement(element);\n    // Only start dragging if element is not locked\n    if (!element.locked) {\n      setIsDragging(true);\n      setDragStart({ x: e.clientX, y: e.clientY });\n      setDragElementStart({ x: element.x, y: element.y });\n    }\n  };\n\n  const handleMouseMove = useCallback((e) => {\n    // Skip if resizing - let resize handler take over\n    if (isResizing) return;\n    if (!isDragging || !selectedElement) return;\n    \n    const dx = e.clientX - dragStart.x;\n    const dy = e.clientY - dragStart.y;\n    \n    // Apply zoom factor to get accurate movement\n    const zoomFactor = zoom / 100;\n    const newX = dragElementStart.x + (dx / zoomFactor);\n    const newY = dragElementStart.y + (dy / zoomFactor);\n    \n    updateElement(selectedElement.id, { x: newX, y: newY });\n  }, [isDragging, isResizing, selectedElement, dragStart, dragElementStart, zoom]);\n\n  const handleMouseUp = useCallback(() => {\n    if (isDragging && selectedElement) {\n      // Save to history when drag ends\n      saveToHistory(elements);\n      // Mark that we were just dragging to prevent deselection on click\n      wasDraggingRef.current = true;\n      setTimeout(() => {\n        wasDraggingRef.current = false;\n      }, 100);\n    }\n    setIsDragging(false);\n  }, [isDragging, selectedElement, elements, saveToHistory]);\n\n  // Add global mouse move and up listeners for dragging\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  // Resize handlers\n  const handleResizeStart = (e, handle, element) => {\n    e.stopPropagation();\n    e.preventDefault();\n    // Stop any dragging that might be in progress\n    setIsDragging(false);\n    setIsResizing(true);\n    setResizeHandle(handle);\n    setResizeStart({\n      x: e.clientX,\n      y: e.clientY,\n      width: element.width,\n      height: element.height,\n      elementX: element.x,\n      elementY: element.y\n    });\n  };\n\n  const handleResizeMove = useCallback((e) => {\n    if (!isResizing || !selectedElement || !resizeHandle) return;\n    \n    const zoomFactor = zoom / 100;\n    const dx = (e.clientX - resizeStart.x) / zoomFactor;\n    const dy = (e.clientY - resizeStart.y) / zoomFactor;\n    \n    let newWidth = resizeStart.width;\n    let newHeight = resizeStart.height;\n    let newX = resizeStart.elementX;\n    let newY = resizeStart.elementY;\n    \n    // Handle different resize directions\n    if (resizeHandle.includes('e')) {\n      newWidth = Math.max(20, resizeStart.width + dx);\n    }\n    if (resizeHandle.includes('w')) {\n      newWidth = Math.max(20, resizeStart.width - dx);\n      newX = resizeStart.elementX + dx;\n    }\n    if (resizeHandle.includes('s')) {\n      newHeight = Math.max(20, resizeStart.height + dy);\n    }\n    if (resizeHandle.includes('n')) {\n      newHeight = Math.max(20, resizeStart.height - dy);\n      newY = resizeStart.elementY + dy;\n    }\n    \n    updateElement(selectedElement.id, { width: newWidth, height: newHeight, x: newX, y: newY });\n  }, [isResizing, selectedElement, resizeHandle, resizeStart, zoom]);\n\n  const handleResizeEnd = useCallback(() => {\n    if (isResizing && selectedElement) {\n      saveToHistory(elements);\n      wasDraggingRef.current = true;\n      setTimeout(() => {\n        wasDraggingRef.current = false;\n      }, 100);\n    }\n    setIsResizing(false);\n    setResizeHandle(null);\n  }, [isResizing, selectedElement, elements, saveToHistory]);\n\n  // Add global mouse listeners for resizing\n  useEffect(() => {\n    if (isResizing) {\n      window.addEventListener('mousemove', handleResizeMove);\n      window.addEventListener('mouseup', handleResizeEnd);\n      return () => {\n        window.removeEventListener('mousemove', handleResizeMove);\n        window.removeEventListener('mouseup', handleResizeEnd);\n      };\n    }\n  }, [isResizing, handleResizeMove, handleResizeEnd]);\n\n  // Render resize handles for selected element\n  const renderResizeHandles = (element) => {\n    if (!selectedElement || selectedElement.id !== element.id || element.locked) return null;\n    \n    const handleStyle = {\n      position: 'absolute',\n      width: 14,\n      height: 14,\n      backgroundColor: '#1976d2',\n      border: '2px solid white',\n      borderRadius: 2,\n      zIndex: 9999,\n      boxShadow: '0 2px 4px rgba(0,0,0,0.3)',\n      pointerEvents: 'auto',  // Ensure handles capture events\n    };\n    \n    const handles = [\n      { key: 'nw', style: { top: -7, left: -7, cursor: 'nw-resize' } },\n      { key: 'ne', style: { top: -7, right: -7, cursor: 'ne-resize' } },\n      { key: 'sw', style: { bottom: -7, left: -7, cursor: 'sw-resize' } },\n      { key: 'se', style: { bottom: -7, right: -7, cursor: 'se-resize' } },\n      { key: 'n', style: { top: -7, left: '50%', transform: 'translateX(-50%)', cursor: 'n-resize' } },\n      { key: 's', style: { bottom: -7, left: '50%', transform: 'translateX(-50%)', cursor: 's-resize' } },\n      { key: 'e', style: { right: -7, top: '50%', transform: 'translateY(-50%)', cursor: 'e-resize' } },\n      { key: 'w', style: { left: -7, top: '50%', transform: 'translateY(-50%)', cursor: 'w-resize' } },\n    ];\n    \n    return handles.map(h => (\n      <Box\n        key={h.key}\n        sx={{ ...handleStyle, ...h.style }}\n        onMouseDown={(e) => {\n          e.stopPropagation();\n          e.preventDefault();\n          handleResizeStart(e, h.key, element);\n        }}\n      />\n    ));\n  };\n  \n  const handleUndo = () => {\n    if (historyIndex > 0) {\n      setHistoryIndex(historyIndex - 1);\n      setElements(JSON.parse(history[historyIndex - 1]));\n    }\n  };\n  \n  const handleRedo = () => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(historyIndex + 1);\n      setElements(JSON.parse(history[historyIndex + 1]));\n    }\n  };\n  \n  // Clear Canvas\n  const handleClearCanvas = () => {\n    setElements([]);\n    setSelectedElement(null);\n    setHistory([]);\n    setHistoryIndex(-1);\n    setSnackbar({ open: true, message: 'Canvas cleared!', severity: 'info' });\n  };\n  \n  // New Design - Reset everything\n  const handleNewDesign = () => {\n    setElements([]);\n    setSelectedElement(null);\n    setHistory([]);\n    setHistoryIndex(-1);\n    setCanvasBg('#ffffff');\n    setPageSize('A4');\n    setDesignName('');\n    setSnackbar({ open: true, message: 'New design created!', severity: 'success' });\n  };\n  \n  // Add Element\n  const addElement = async (type, props = {}) => {\n    const canvasSize = getCanvasSize();\n    const id = `${type}-${Date.now()}`;\n    \n    // If it's an image from external URL (R2), convert to base64 for reliable export\n    let finalProps = { ...props };\n    if (type === ELEMENT_TYPES.IMAGE && props.src && !props.src.startsWith('data:')) {\n      try {\n        setSnackbar({ open: true, message: 'Loading image...', severity: 'info' });\n        const base64Src = await imageUrlToBase64(props.src);\n        finalProps.src = base64Src;\n        finalProps.originalSrc = props.src; // Keep original for reference\n      } catch (error) {\n        console.warn('Failed to convert image to base64:', error);\n        // Continue with original URL\n      }\n    }\n    \n    const newElement = {\n      id,\n      type,\n      x: canvasSize.width / 2 - 50,\n      y: canvasSize.height / 2 - 25,\n      width: type === 'text' ? 200 : 100,\n      height: type === 'text' ? 50 : 100,\n      rotation: 0,\n      locked: false,\n      ...getDefaultProps(type),\n      ...finalProps\n    };\n    const newElements = [...elements, newElement];\n    setElements(newElements);\n    setSelectedElement(newElement);\n    saveToHistory(newElements);\n  };\n  \n  // Get default props for element type\n  const getDefaultProps = (type) => {\n    switch (type) {\n      case ELEMENT_TYPES.TEXT:\n        return { text: 'Enter text here', fontSize: 24, fontFamily: 'Arial', color: '#000000', bold: false, italic: false, align: 'center' };\n      case ELEMENT_TYPES.RECTANGLE:\n        return { fill: '#2196f3', stroke: '#1976d2', strokeWidth: 2 };\n      case ELEMENT_TYPES.CIRCLE:\n        return { fill: '#4caf50', stroke: '#388e3c', strokeWidth: 2 };\n      case ELEMENT_TYPES.TRIANGLE:\n        return { fill: '#ff9800', stroke: '#f57c00', strokeWidth: 2 };\n      case ELEMENT_TYPES.STAR:\n        return { fill: '#ffeb3b', stroke: '#fbc02d', strokeWidth: 2, points: 5 };\n      case ELEMENT_TYPES.LINE:\n        return { stroke: '#000000', strokeWidth: 3, width: 150, height: 4 };\n      case ELEMENT_TYPES.ARROW:\n        return { stroke: '#000000', strokeWidth: 3, width: 150, height: 4 };\n      case ELEMENT_TYPES.IMAGE:\n        return { src: '', width: 150, height: 150 };\n      default:\n        return {};\n    }\n  };\n  \n  // Update Element\n  const updateElement = (id, updates) => {\n    const newElements = elements.map(el => el.id === id ? { ...el, ...updates } : el);\n    setElements(newElements);\n    if (selectedElement?.id === id) {\n      setSelectedElement({ ...selectedElement, ...updates });\n    }\n  };\n  \n  // Delete Element\n  const deleteElement = (id) => {\n    const newElements = elements.filter(el => el.id !== id);\n    setElements(newElements);\n    setSelectedElement(null);\n    saveToHistory(newElements);\n  };\n  \n  // Duplicate Element\n  const duplicateElement = (element) => {\n    const newElement = {\n      ...element,\n      id: `${element.type}-${Date.now()}`,\n      x: element.x + 20,\n      y: element.y + 20\n    };\n    const newElements = [...elements, newElement];\n    setElements(newElements);\n    setSelectedElement(newElement);\n    saveToHistory(newElements);\n  };\n  \n  // Rotate Element\n  const rotateElement = (id, degrees = 15) => {\n    const element = elements.find(el => el.id === id);\n    if (element && !element.locked) {\n      updateElement(id, { rotation: (element.rotation || 0) + degrees });\n      saveToHistory(elements.map(el => el.id === id ? { ...el, rotation: (el.rotation || 0) + degrees } : el));\n    }\n  };\n  \n  // Bring to Front\n  const bringToFront = (id) => {\n    const element = elements.find(el => el.id === id);\n    if (element) {\n      const newElements = [...elements.filter(el => el.id !== id), element];\n      setElements(newElements);\n      saveToHistory(newElements);\n    }\n  };\n  \n  // Send to Back\n  const sendToBack = (id) => {\n    const element = elements.find(el => el.id === id);\n    if (element) {\n      const newElements = [element, ...elements.filter(el => el.id !== id)];\n      setElements(newElements);\n      saveToHistory(newElements);\n    }\n  };\n  \n  // Toggle Lock\n  const toggleLock = (id) => {\n    const element = elements.find(el => el.id === id);\n    if (element) {\n      updateElement(id, { locked: !element.locked });\n    }\n  };\n  \n  // Handle Image Upload\n  const handleImageUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        addElement(ELEMENT_TYPES.IMAGE, { src: event.target.result });\n        setSnackbar({ open: true, message: 'Image uploaded successfully!', severity: 'success' });\n      };\n      reader.onerror = () => {\n        setSnackbar({ open: true, message: 'Failed to load image', severity: 'error' });\n      };\n      reader.readAsDataURL(file);\n    }\n    // Reset input to allow selecting same file again\n    e.target.value = '';\n  };\n  \n  // Export Canvas\n  const handleExport = async (format = 'png') => {\n    if (!canvasRef.current) {\n      setSnackbar({ open: true, message: 'Canvas not ready', severity: 'error' });\n      return;\n    }\n    try {\n      // First deselect to remove selection UI\n      const wasSelected = selectedElement;\n      setSelectedElement(null);\n      \n      // Wait for UI update\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      // Pre-process images: convert external URLs to base64 for reliable export\n      const imageElements = canvasRef.current.querySelectorAll('img');\n      const originalSrcs = [];\n      \n      // Convert all images to base64 to avoid CORS issues\n      await Promise.all(Array.from(imageElements).map(async (img, index) => {\n        originalSrcs[index] = img.src;\n        if (img.src && !img.src.startsWith('data:')) {\n          try {\n            // Create a canvas to convert image to base64\n            const imgCanvas = document.createElement('canvas');\n            const ctx = imgCanvas.getContext('2d');\n            \n            // Load image with CORS\n            const tempImg = new Image();\n            tempImg.crossOrigin = 'anonymous';\n            \n            await new Promise((resolve, reject) => {\n              tempImg.onload = () => {\n                imgCanvas.width = tempImg.naturalWidth || tempImg.width;\n                imgCanvas.height = tempImg.naturalHeight || tempImg.height;\n                ctx.drawImage(tempImg, 0, 0);\n                try {\n                  img.src = imgCanvas.toDataURL('image/png');\n                } catch (e) {\n                  console.warn('Could not convert image to base64:', e);\n                }\n                resolve();\n              };\n              tempImg.onerror = () => {\n                console.warn('Failed to load image for conversion');\n                resolve(); // Continue anyway\n              };\n              // Add cache buster to force CORS request\n              tempImg.src = img.src + (img.src.includes('?') ? '&' : '?') + '_t=' + Date.now();\n            });\n          } catch (e) {\n            console.warn('Image conversion error:', e);\n          }\n        }\n      }));\n      \n      const canvas = await html2canvas(canvasRef.current, {\n        scale: 2,\n        backgroundColor: canvasBg,\n        useCORS: true,\n        allowTaint: false,\n        logging: false,\n        imageTimeout: 30000,\n        foreignObjectRendering: false,\n        removeContainer: true,\n        onclone: (clonedDoc, element) => {\n          // Remove resize handles from clone\n          const handles = clonedDoc.querySelectorAll('[style*=\"z-index: 9999\"]');\n          handles.forEach(h => h.remove());\n          // Remove selection outlines\n          const selected = clonedDoc.querySelectorAll('[style*=\"outline\"]');\n          selected.forEach(s => s.style.outline = 'none');\n          // Ensure all images are visible\n          const images = element.querySelectorAll('img');\n          images.forEach(img => {\n            img.crossOrigin = 'anonymous';\n            img.style.visibility = 'visible';\n          });\n        }\n      });\n      \n      // Restore original image sources\n      imageElements.forEach((img, index) => {\n        if (originalSrcs[index]) {\n          img.src = originalSrcs[index];\n        }\n      });\n      \n      const link = document.createElement('a');\n      link.download = `${makerType}-design-${Date.now()}.${format}`;\n      \n      if (format === 'jpg' || format === 'jpeg') {\n        link.href = canvas.toDataURL('image/jpeg', 0.9);\n      } else {\n        link.href = canvas.toDataURL('image/png');\n      }\n      \n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      \n      // Restore selection\n      if (wasSelected) {\n        setSelectedElement(wasSelected);\n      }\n      \n      setSnackbar({ open: true, message: 'Design exported successfully!', severity: 'success' });\n    } catch (error) {\n      console.error('Export error:', error);\n      setSnackbar({ open: true, message: `Export failed: ${error.message}. Try using smaller images or check image permissions.`, severity: 'error' });\n    }\n  };\n  \n  // Print Canvas\n  const handlePrint = async () => {\n    if (!canvasRef.current) return;\n    try {\n      // Deselect first\n      setSelectedElement(null);\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      // Pre-process images: convert external URLs to base64 for reliable print\n      const imageElements = canvasRef.current.querySelectorAll('img');\n      const originalSrcs = [];\n      \n      // Convert all images to base64 to avoid CORS issues\n      await Promise.all(Array.from(imageElements).map(async (img, index) => {\n        originalSrcs[index] = img.src;\n        if (img.src && !img.src.startsWith('data:')) {\n          try {\n            const imgCanvas = document.createElement('canvas');\n            const ctx = imgCanvas.getContext('2d');\n            const tempImg = new Image();\n            tempImg.crossOrigin = 'anonymous';\n            \n            await new Promise((resolve, reject) => {\n              tempImg.onload = () => {\n                imgCanvas.width = tempImg.naturalWidth || tempImg.width;\n                imgCanvas.height = tempImg.naturalHeight || tempImg.height;\n                ctx.drawImage(tempImg, 0, 0);\n                try {\n                  img.src = imgCanvas.toDataURL('image/png');\n                } catch (e) {\n                  console.warn('Could not convert image to base64:', e);\n                }\n                resolve();\n              };\n              tempImg.onerror = () => resolve();\n              tempImg.src = img.src + (img.src.includes('?') ? '&' : '?') + '_t=' + Date.now();\n            });\n          } catch (e) {\n            console.warn('Image conversion error:', e);\n          }\n        }\n      }));\n      \n      const canvas = await html2canvas(canvasRef.current, { \n        scale: 2, \n        backgroundColor: canvasBg,\n        useCORS: true,\n        allowTaint: false,\n        logging: false,\n        imageTimeout: 30000,\n        onclone: (clonedDoc, element) => {\n          const handles = clonedDoc.querySelectorAll('[style*=\"z-index: 9999\"]');\n          handles.forEach(h => h.remove());\n          const selected = clonedDoc.querySelectorAll('[style*=\"outline\"]');\n          selected.forEach(s => s.style.outline = 'none');\n        }\n      });\n      \n      // Restore original image sources\n      imageElements.forEach((img, index) => {\n        if (originalSrcs[index]) {\n          img.src = originalSrcs[index];\n        }\n      });\n      \n      const printWindow = window.open('', '_blank');\n      if (printWindow) {\n        printWindow.document.write(`\n          <!DOCTYPE html>\n          <html><head><title>Print Design</title>\n          <style>body{margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;}\n          img{max-width:100%;height:auto;}@media print{body{margin:0;}}</style>\n          </head><body><img src=\"${canvas.toDataURL()}\" /></body></html>\n        `);\n        printWindow.document.close();\n        setTimeout(() => { printWindow.print(); printWindow.close(); }, 250);\n      }\n    } catch (error) {\n      console.error('Print error:', error);\n      setSnackbar({ open: true, message: 'Print failed. Try exporting as image first.', severity: 'error' });\n    }\n  };\n  \n  // Save Design to Backend\n  const handleSave = async () => {\n    if (!isLoggedin || !accessToken) {\n      setSnackbar({ open: true, message: 'Please login to save designs', severity: 'warning' });\n      return;\n    }\n    if (!designName.trim()) {\n      setSnackbar({ open: true, message: 'Please enter a design name', severity: 'warning' });\n      return;\n    }\n    \n    try {\n      const backendUrl = process.env.REACT_APP_BACKEND_URL;\n      const response = await fetch(`${backendUrl}/api/rest/templates/save`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: JSON.stringify({\n          name: designName,\n          makerType,\n          pageSize,\n          customSize,\n          canvasBg,\n          elements\n        })\n      });\n      \n      if (response.ok) {\n        await fetchTemplates(); // Refresh templates list\n        setSaveDialog(false);\n        setDesignName('');\n        setSnackbar({ open: true, message: 'Design saved!', severity: 'success' });\n      } else {\n        throw new Error('Failed to save design');\n      }\n    } catch (error) {\n      console.error('Save error:', error);\n      setSnackbar({ open: true, message: 'Failed to save design', severity: 'error' });\n    }\n  };\n  \n  // Load Design\n  const handleLoad = (design) => {\n    setPageSize(design.pageSize || 'A4');\n    setCustomSize(design.customSize || { width: 800, height: 600 });\n    setCanvasBg(design.canvasBg || '#ffffff');\n    setElements(design.elements || []);\n    setSelectedElement(null);\n    setLoadDialog(false);\n    setSnackbar({ open: true, message: `Loaded: ${design.name}`, severity: 'success' });\n  };\n  \n  // Delete Saved Design from Backend\n  const handleDeleteSaved = async (id) => {\n    // Cannot delete seed/system templates\n    if (id.toString().startsWith('seed-')) {\n      setSnackbar({ open: true, message: 'Cannot delete system templates', severity: 'warning' });\n      return;\n    }\n    \n    try {\n      const backendUrl = process.env.REACT_APP_BACKEND_URL;\n      const response = await fetch(`${backendUrl}/api/rest/templates/${id}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${accessToken}` }\n      });\n      \n      if (response.ok) {\n        await fetchTemplates(); // Refresh templates list\n        setSnackbar({ open: true, message: 'Design deleted', severity: 'success' });\n      }\n    } catch (error) {\n      console.error('Delete error:', error);\n    }\n  };\n  \n  // Expose methods via ref\n  useImperativeHandle(ref, () => ({\n    export: handleExport,\n    print: handlePrint,\n    clear: handleClearCanvas,\n    save: () => setSaveDialog(true),\n    load: () => setLoadDialog(true)\n  }));\n  \n  // Render Element on Canvas\n  const renderElement = (element) => {\n    const commonStyle = {\n      position: 'absolute',\n      left: element.x,\n      top: element.y,\n      width: element.width,\n      height: element.height,\n      transform: `rotate(${element.rotation || 0}deg)`,\n      cursor: element.locked ? 'not-allowed' : (isDragging && selectedElement?.id === element.id ? 'grabbing' : 'grab'),\n      border: selectedElement?.id === element.id ? '2px dashed #1976d2' : 'none',\n      boxSizing: 'border-box',\n      userSelect: 'none'\n    };\n    \n    // Wrapper with resize handles\n    const wrapWithResizeHandles = (content) => (\n      <Box key={element.id} sx={{ ...commonStyle }}>\n        {content}\n        {renderResizeHandles(element)}\n      </Box>\n    );\n    \n    switch (element.type) {\n      case ELEMENT_TYPES.TEXT:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: element.align || 'center' }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          >\n            <Typography\n              sx={{\n                fontSize: element.fontSize,\n                fontFamily: element.fontFamily,\n                color: element.color,\n                fontWeight: element.bold ? 'bold' : 'normal',\n                fontStyle: element.italic ? 'italic' : 'normal',\n                textAlign: element.align,\n                width: '100%',\n                pointerEvents: 'none'\n              }}\n            >\n              {element.text}\n            </Typography>\n          </Box>\n        );\n        \n      case ELEMENT_TYPES.IMAGE:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{ width: '100%', height: '100%' }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          >\n            <img\n              src={element.src}\n              alt=\"\"\n              crossOrigin=\"anonymous\"\n              style={{ width: '100%', height: '100%', objectFit: 'contain', pointerEvents: 'none' }}\n              draggable={false}\n            />\n          </Box>\n        );\n        \n      case ELEMENT_TYPES.RECTANGLE:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{\n              width: '100%',\n              height: '100%',\n              backgroundColor: element.fill,\n              border: `${element.strokeWidth}px solid ${element.stroke}`,\n              borderRadius: '4px'\n            }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          />\n        );\n        \n      case ELEMENT_TYPES.CIRCLE:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{\n              width: '100%',\n              height: '100%',\n              backgroundColor: element.fill,\n              border: `${element.strokeWidth}px solid ${element.stroke}`,\n              borderRadius: '50%'\n            }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          />\n        );\n        \n      case ELEMENT_TYPES.TRIANGLE:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{ width: '100%', height: '100%', background: 'transparent' }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          >\n            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\" style={{ pointerEvents: 'none' }}>\n              <polygon\n                points=\"50,10 90,90 10,90\"\n                fill={element.fill}\n                stroke={element.stroke}\n                strokeWidth={element.strokeWidth}\n              />\n            </svg>\n          </Box>\n        );\n        \n      case ELEMENT_TYPES.STAR:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{ width: '100%', height: '100%', background: 'transparent' }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          >\n            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" style={{ pointerEvents: 'none' }}>\n              <polygon\n                points=\"50,5 61,40 98,40 68,62 79,97 50,75 21,97 32,62 2,40 39,40\"\n                fill={element.fill}\n                stroke={element.stroke}\n                strokeWidth={element.strokeWidth}\n              />\n            </svg>\n          </Box>\n        );\n        \n      case ELEMENT_TYPES.LINE:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{ width: '100%', height: '100%', background: 'transparent' }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          >\n            <svg width=\"100%\" height=\"100%\" style={{ pointerEvents: 'none' }}>\n              <line x1=\"0\" y1=\"50%\" x2=\"100%\" y2=\"50%\" stroke={element.stroke} strokeWidth={element.strokeWidth} />\n            </svg>\n          </Box>\n        );\n        \n      case ELEMENT_TYPES.ARROW:\n        return wrapWithResizeHandles(\n          <Box\n            sx={{ width: '100%', height: '100%', background: 'transparent' }}\n            onMouseDown={(e) => handleMouseDown(e, element)}\n          >\n            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 20\" style={{ pointerEvents: 'none' }}>\n              <defs>\n                <marker id={`arrowhead-${element.id}`} markerWidth=\"10\" markerHeight=\"7\" refX=\"10\" refY=\"3.5\" orient=\"auto\">\n                  <polygon points=\"0 0, 10 3.5, 0 7\" fill={element.stroke} />\n                </marker>\n              </defs>\n              <line x1=\"0\" y1=\"10\" x2=\"85\" y2=\"10\" stroke={element.stroke} strokeWidth={element.strokeWidth} markerEnd={`url(#arrowhead-${element.id})`} />\n            </svg>\n          </Box>\n        );\n        \n      default:\n        return null;\n    }\n  };\n  \n  const canvasSize = getCanvasSize();\n  const selectedEl = selectedElement;\n  \n  // Check if mobile\n  const isMobileView = typeof window !== 'undefined' && window.innerWidth < 768;\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  \n  return (\n    <Box sx={{ display: 'flex', flexDirection: { xs: 'column', md: 'row' }, height: { xs: 'auto', md: 'calc(100vh - 120px)' }, minHeight: { xs: '100vh', md: 'auto' }, overflow: 'hidden', bgcolor: '#f0f2f5' }}>\n      {/* Mobile Toggle Button */}\n      <Box sx={{ display: { xs: 'flex', md: 'none' }, p: 1, bgcolor: 'primary.main', color: 'white', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Typography variant=\"subtitle1\">Maker Tools</Typography>\n        <Button variant=\"contained\" size=\"small\" onClick={() => setMobileMenuOpen(!mobileMenuOpen)} sx={{ bgcolor: 'white', color: 'primary.main' }}>\n          {mobileMenuOpen ? 'Hide Tools' : 'Show Tools'}\n        </Button>\n      </Box>\n      \n      {/* Left Panel - Tools */}\n      <Paper sx={{ \n        width: { xs: '100%', md: 280 }, \n        display: { xs: mobileMenuOpen ? 'flex' : 'none', md: 'flex' }, \n        flexDirection: 'column', \n        borderRadius: 0, \n        zIndex: 10, \n        boxShadow: 2,\n        maxHeight: { xs: '50vh', md: 'none' },\n        overflow: 'auto'\n      }}>\n        <Tabs value={leftTab} onChange={(e, v) => setLeftTab(v)} variant=\"fullWidth\" sx={{ '& .MuiTab-root': { minWidth: 'auto', fontSize: { xs: '0.7rem', md: '0.875rem' } } }}>\n          <Tab label=\"Elements\" />\n          <Tab label=\"Templates\" />\n          <Tab label=\"Images\" />\n        </Tabs>\n        \n        <Box sx={{ flex: 1, overflow: 'auto', p: 2 }}>\n          {/* Elements Tab */}\n          {leftTab === 0 && (\n            <>\n              <Typography variant=\"subtitle2\" gutterBottom>Add Shapes</Typography>\n              <Grid container spacing={1} sx={{ mb: 2 }}>\n                <Grid item xs={4}>\n                  <Button fullWidth variant=\"outlined\" onClick={() => addElement(ELEMENT_TYPES.RECTANGLE)} sx={{ flexDirection: 'column', py: 1 }}>\n                    <RectangleIcon />\n                    <Typography variant=\"caption\">Rect</Typography>\n                  </Button>\n                </Grid>\n                <Grid item xs={4}>\n                  <Button fullWidth variant=\"outlined\" onClick={() => addElement(ELEMENT_TYPES.CIRCLE)} sx={{ flexDirection: 'column', py: 1 }}>\n                    <CircleIcon />\n                    <Typography variant=\"caption\">Circle</Typography>\n                  </Button>\n                </Grid>\n                <Grid item xs={4}>\n                  <Button fullWidth variant=\"outlined\" onClick={() => addElement(ELEMENT_TYPES.TRIANGLE)} sx={{ flexDirection: 'column', py: 1 }}>\n                    <TriangleIcon />\n                    <Typography variant=\"caption\">Triangle</Typography>\n                  </Button>\n                </Grid>\n                <Grid item xs={4}>\n                  <Button fullWidth variant=\"outlined\" onClick={() => addElement(ELEMENT_TYPES.STAR)} sx={{ flexDirection: 'column', py: 1 }}>\n                    <StarIcon />\n                    <Typography variant=\"caption\">Star</Typography>\n                  </Button>\n                </Grid>\n                <Grid item xs={4}>\n                  <Button fullWidth variant=\"outlined\" onClick={() => addElement(ELEMENT_TYPES.LINE)} sx={{ flexDirection: 'column', py: 1 }}>\n                    <LineIcon />\n                    <Typography variant=\"caption\">Line</Typography>\n                  </Button>\n                </Grid>\n                <Grid item xs={4}>\n                  <Button fullWidth variant=\"outlined\" onClick={() => addElement(ELEMENT_TYPES.ARROW)} sx={{ flexDirection: 'column', py: 1 }}>\n                    <ArrowIcon />\n                    <Typography variant=\"caption\">Arrow</Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n              \n              <Divider sx={{ my: 2 }} />\n              \n              <Typography variant=\"subtitle2\" gutterBottom>Add Content</Typography>\n              <Button fullWidth variant=\"outlined\" startIcon={<TextIcon />} onClick={() => addElement(ELEMENT_TYPES.TEXT)} sx={{ mb: 1 }}>\n                Add Text\n              </Button>\n              <Button fullWidth variant=\"outlined\" startIcon={<UploadIcon />} onClick={() => fileInputRef.current?.click()}>\n                Upload Image\n              </Button>\n              <input \n                ref={fileInputRef} \n                type=\"file\" \n                style={{ display: 'none' }}\n                accept=\"image/*,.png,.jpg,.jpeg,.gif,.webp\" \n                onChange={handleImageUpload} \n              />\n              \n              <Divider sx={{ my: 2 }} />\n              \n              <Typography variant=\"subtitle2\" gutterBottom>Page Size</Typography>\n              <FormControl fullWidth size=\"small\" sx={{ mb: 1 }}>\n                <Select value={pageSize} onChange={(e) => setPageSize(e.target.value)}>\n                  {Object.entries(PAGE_SIZES).map(([key, val]) => (\n                    <MenuItem key={key} value={key}>{val.label}</MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              {pageSize === 'Custom' && (\n                <Box sx={{ display: 'flex', gap: 1 }}>\n                  <TextField size=\"small\" label=\"W\" type=\"number\" value={customSize.width} onChange={(e) => setCustomSize({ ...customSize, width: parseInt(e.target.value) || 100 })} />\n                  <TextField size=\"small\" label=\"H\" type=\"number\" value={customSize.height} onChange={(e) => setCustomSize({ ...customSize, height: parseInt(e.target.value) || 100 })} />\n                </Box>\n              )}\n              \n              <Divider sx={{ my: 2 }} />\n              \n              <Typography variant=\"subtitle2\" gutterBottom>Background</Typography>\n              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                {COLOR_PRESETS.map(color => (\n                  <Box\n                    key={color}\n                    sx={{\n                      width: 24, height: 24, bgcolor: color, cursor: 'pointer', border: canvasBg === color ? '2px solid #1976d2' : '1px solid #ccc', borderRadius: 0.5\n                    }}\n                    onClick={() => setCanvasBg(color)}\n                  />\n                ))}\n              </Box>\n            </>\n          )}\n          \n          {/* Templates Tab */}\n          {leftTab === 1 && (\n            <>\n              <Typography variant=\"subtitle2\" gutterBottom>Saved Designs</Typography>\n              {savedDesigns.length === 0 ? (\n                <Typography variant=\"body2\" color=\"textSecondary\">No saved designs yet</Typography>\n              ) : (\n                <List dense>\n                  {savedDesigns.map(design => {\n                    const dateStr = design.created_at || design.createdAt;\n                    let dateDisplay = '';\n                    if (design.isSystem) {\n                      dateDisplay = 'System Template';\n                    } else if (dateStr) {\n                      try {\n                        const date = new Date(dateStr);\n                        dateDisplay = isNaN(date.getTime()) ? '' : date.toLocaleDateString();\n                      } catch {\n                        dateDisplay = '';\n                      }\n                    }\n                    const isSystemTemplate = design.isSystem || design.id?.toString().startsWith('seed-');\n                    return (\n                      <ListItem key={design.id} button onClick={() => handleLoad(design)} secondaryAction={\n                        !isSystemTemplate && (\n                          <IconButton edge=\"end\" size=\"small\" color=\"error\" onClick={(e) => { e.stopPropagation(); handleDeleteSaved(design.id); }}>\n                            <DeleteIcon fontSize=\"small\" />\n                          </IconButton>\n                        )\n                      }>\n                        <ListItemText \n                          primary={design.name} \n                          secondary={dateDisplay || 'User Design'}\n                          primaryTypographyProps={{ fontWeight: isSystemTemplate ? 500 : 400 }}\n                        />\n                      </ListItem>\n                    );\n                  })}\n                </List>\n              )}\n            </>\n          )}\n          \n          {/* Images Tab */}\n          {leftTab === 2 && (\n            <>\n              <Typography variant=\"subtitle2\" gutterBottom sx={{ color: '#1976d2' }}> MySchool Image Bank</Typography>\n              <TextField\n                size=\"small\"\n                fullWidth\n                placeholder=\"Search images (e.g., lion, elephant, tree)...\"\n                value={imageBankSearch}\n                onChange={(e) => setImageBankSearch(e.target.value)}\n                InputProps={{ startAdornment: <SearchIcon sx={{ mr: 1, color: 'text.secondary' }} /> }}\n                sx={{ mb: 1 }}\n              />\n              <Box sx={{ maxHeight: 300, overflowY: 'auto', border: '1px solid #e0e0e0', borderRadius: 1, p: 1 }}>\n                {imageBankLoading ? (\n                  <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}><CircularProgress size={24} /></Box>\n                ) : imageBankSearch.length < 2 ? (\n                  <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" sx={{ py: 2 }}>Type at least 2 characters to search</Typography>\n                ) : imageBankImages.length > 0 ? (\n                  <Grid container spacing={1}>\n                    {imageBankImages.slice(0, 30).map((img, i) => (\n                      <Grid item xs={4} key={i}>\n                        <Card sx={{ cursor: 'pointer', '&:hover': { boxShadow: 4 } }} onClick={() => addElement(ELEMENT_TYPES.IMAGE, { src: img })}>\n                          <CardMedia component=\"img\" height=\"60\" image={img} sx={{ objectFit: 'contain', bgcolor: '#f5f5f5' }} />\n                        </Card>\n                      </Grid>\n                    ))}\n                  </Grid>\n                ) : (\n                  <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" sx={{ py: 2 }}>No images found for &quot;{imageBankSearch}&quot;</Typography>\n                )}\n              </Box>\n              <Divider sx={{ my: 2 }} />\n              <Button fullWidth variant=\"outlined\" startIcon={<UploadIcon />} onClick={() => fileInputRefImages.current?.click()}>\n                Upload from Device\n              </Button>\n              <input \n                ref={fileInputRefImages} \n                type=\"file\" \n                style={{ display: 'none' }}\n                accept=\"image/*,.png,.jpg,.jpeg,.gif,.webp\" \n                onChange={handleImageUpload} \n              />\n            </>\n          )}\n        </Box>\n      </Paper>\n      \n      {/* Main Canvas Area */}\n      <Box sx={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden', minHeight: { xs: '60vh', md: 'auto' } }}>\n        {/* Top Toolbar - Made responsive */}\n        <Paper sx={{ p: { xs: 0.5, md: 1 }, borderRadius: 0, display: 'flex', alignItems: 'center', gap: { xs: 0.5, md: 1 }, flexWrap: 'wrap', overflowX: 'auto' }}>\n          <Tooltip title=\"New Design\"><IconButton onClick={handleNewDesign} color=\"primary\" size=\"small\"><NewIcon /></IconButton></Tooltip>\n          <Divider orientation=\"vertical\" flexItem sx={{ display: { xs: 'none', sm: 'block' } }} />\n          <Tooltip title=\"Undo\"><span><IconButton onClick={handleUndo} disabled={historyIndex <= 0} size=\"small\"><UndoIcon /></IconButton></span></Tooltip>\n          <Tooltip title=\"Redo\"><span><IconButton onClick={handleRedo} disabled={historyIndex >= history.length - 1} size=\"small\"><RedoIcon /></IconButton></span></Tooltip>\n          <Divider orientation=\"vertical\" flexItem sx={{ display: { xs: 'none', sm: 'block' } }} />\n          <Tooltip title=\"Clear Canvas\"><IconButton onClick={handleClearCanvas} color=\"error\" size=\"small\"><ClearIcon /></IconButton></Tooltip>\n          <Divider orientation=\"vertical\" flexItem sx={{ display: { xs: 'none', sm: 'block' } }} />\n          <Tooltip title=\"Zoom Out\"><IconButton onClick={() => setZoom(Math.max(25, zoom - 10))} size=\"small\"><ZoomOutIcon /></IconButton></Tooltip>\n          <Typography sx={{ minWidth: { xs: 35, md: 45 }, textAlign: 'center', fontSize: { xs: '0.75rem', md: '1rem' } }}>{zoom}%</Typography>\n          <Tooltip title=\"Zoom In\"><IconButton onClick={() => setZoom(Math.min(200, zoom + 10))} size=\"small\"><ZoomInIcon /></IconButton></Tooltip>\n          <Divider orientation=\"vertical\" flexItem sx={{ display: { xs: 'none', sm: 'block' } }} />\n          <Tooltip title=\"Toggle Grid\"><IconButton onClick={() => setShowGrid(!showGrid)} color={showGrid ? 'primary' : 'default'} size=\"small\"><GridIcon /></IconButton></Tooltip>\n          <Divider orientation=\"vertical\" flexItem sx={{ display: { xs: 'none', md: 'block' } }} />\n          {/* Page Size Quick Select */}\n          <FormControl size=\"small\" sx={{ minWidth: { xs: 70, md: 100 }, display: { xs: 'none', sm: 'block' } }}>\n            <Select value={pageSize} onChange={(e) => setPageSize(e.target.value)} displayEmpty sx={{ fontSize: '0.85rem' }}>\n              <MenuItem value=\"A3\">A3</MenuItem>\n              <MenuItem value=\"A4\">A4</MenuItem>\n              <MenuItem value=\"A5\">A5</MenuItem>\n              <MenuItem value=\"Letter\">Letter</MenuItem>\n              <MenuItem value=\"Square\">Square</MenuItem>\n            </Select>\n          </FormControl>\n          <Box sx={{ flex: 1 }} />\n          {/* Action buttons - responsive */}\n          <Box sx={{ display: 'flex', gap: 0.5, flexWrap: 'wrap' }}>\n            <Button variant=\"outlined\" size=\"small\" startIcon={<PrintIcon />} onClick={handlePrint} sx={{ display: { xs: 'none', md: 'inline-flex' }, color: '#1976d2', '&:hover': { color: '#000000', backgroundColor: 'rgba(25, 118, 210, 0.04)' } }}>Print</Button>\n            <Button variant=\"outlined\" size=\"small\" startIcon={<SaveIcon />} onClick={() => setSaveDialog(true)} sx={{ fontSize: { xs: '0.7rem', md: '0.875rem' }, minWidth: { xs: 60, md: 80 }, color: '#1976d2', '&:hover': { color: '#000000', backgroundColor: 'rgba(25, 118, 210, 0.04)' } }}>Save</Button>\n            <Button variant=\"outlined\" size=\"small\" startIcon={<LoadIcon />} onClick={() => setLoadDialog(true)} sx={{ fontSize: { xs: '0.7rem', md: '0.875rem' }, minWidth: { xs: 60, md: 80 }, color: '#1976d2', '&:hover': { color: '#000000', backgroundColor: 'rgba(25, 118, 210, 0.04)' } }}>Load</Button>\n          </Box>\n          <Tooltip title=\"Export as PNG image\">\n            <Button variant=\"outlined\" startIcon={<DownloadIcon />} onClick={() => handleExport('png')} sx={{ color: '#1976d2', '&:hover': { color: '#000000', backgroundColor: 'rgba(25, 118, 210, 0.04)' } }}>Export</Button>\n          </Tooltip>\n        </Paper>\n        \n        {/* Canvas Container */}\n        <Box sx={{ flex: 1, overflow: 'auto', display: 'flex', justifyContent: 'center', alignItems: 'center', p: 2, bgcolor: '#f5f5f5' }}>\n          <Paper\n            ref={canvasRef}\n            sx={{\n              width: canvasSize.width * (zoom / 100),\n              height: canvasSize.height * (zoom / 100),\n              position: 'relative',\n              bgcolor: canvasBg,\n              boxShadow: 3,\n              overflow: 'hidden',\n              backgroundImage: showGrid ? 'linear-gradient(#e0e0e0 1px, transparent 1px), linear-gradient(90deg, #e0e0e0 1px, transparent 1px)' : 'none',\n              backgroundSize: showGrid ? '20px 20px' : 'auto'\n            }}\n            onClick={() => {\n              // Don't deselect if we just finished dragging\n              if (!wasDraggingRef.current) {\n                setSelectedElement(null);\n              }\n            }}\n          >\n            {elements.map(el => renderElement(el))}\n          </Paper>\n        </Box>\n      </Box>\n      \n      {/* Right Panel - Properties */}\n      <Paper sx={{ width: 260, display: 'flex', flexDirection: 'column', borderRadius: 0, p: 2, overflow: 'auto' }}>\n        <Typography variant=\"subtitle1\" gutterBottom sx={{ fontWeight: 'bold' }}>Properties</Typography>\n        \n        {selectedEl ? (\n          <>\n            <Typography variant=\"caption\" color=\"textSecondary\" gutterBottom>Selected: {selectedEl.type}</Typography>\n            \n            {/* Position & Size */}\n            <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>Position & Size</Typography>\n            <Grid container spacing={1}>\n              <Grid item xs={6}>\n                <TextField size=\"small\" label=\"X\" type=\"number\" fullWidth value={Math.round(selectedEl.x)} onChange={(e) => updateElement(selectedEl.id, { x: parseInt(e.target.value) || 0 })} />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField size=\"small\" label=\"Y\" type=\"number\" fullWidth value={Math.round(selectedEl.y)} onChange={(e) => updateElement(selectedEl.id, { y: parseInt(e.target.value) || 0 })} />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField size=\"small\" label=\"Width\" type=\"number\" fullWidth value={Math.round(selectedEl.width)} onChange={(e) => updateElement(selectedEl.id, { width: parseInt(e.target.value) || 10 })} />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField size=\"small\" label=\"Height\" type=\"number\" fullWidth value={Math.round(selectedEl.height)} onChange={(e) => updateElement(selectedEl.id, { height: parseInt(e.target.value) || 10 })} />\n              </Grid>\n            </Grid>\n            \n            {/* Rotation */}\n            <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>Rotation</Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Slider size=\"small\" value={selectedEl.rotation || 0} min={0} max={360} onChange={(e, v) => updateElement(selectedEl.id, { rotation: v })} />\n              <Typography variant=\"caption\">{selectedEl.rotation || 0}</Typography>\n            </Box>\n            <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n              <Button size=\"small\" variant=\"outlined\" onClick={() => rotateElement(selectedEl.id, -15)}>-15</Button>\n              <Button size=\"small\" variant=\"outlined\" onClick={() => rotateElement(selectedEl.id, 15)}>+15</Button>\n              <Button size=\"small\" variant=\"outlined\" onClick={() => rotateElement(selectedEl.id, 90)}>+90</Button>\n            </Box>\n            \n            {/* Image Properties - Auto-fit */}\n            {selectedEl.type === ELEMENT_TYPES.IMAGE && (\n              <>\n                <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>Image Options</Typography>\n                <Typography variant=\"caption\" color=\"textSecondary\" sx={{ display: 'block', mb: 1 }}>\n                  Drag corners to resize, or use a shape as mask:\n                </Typography>\n                <Button \n                  size=\"small\" \n                  variant=\"outlined\" \n                  fullWidth\n                  onClick={() => {\n                    // Find the last shape added (to fit image into)\n                    const shapes = elements.filter(e => \n                      [ELEMENT_TYPES.RECTANGLE, ELEMENT_TYPES.CIRCLE, ELEMENT_TYPES.TRIANGLE, ELEMENT_TYPES.STAR].includes(e.type)\n                    );\n                    if (shapes.length > 0) {\n                      const targetShape = shapes[shapes.length - 1];\n                      updateElement(selectedEl.id, { \n                        x: targetShape.x, \n                        y: targetShape.y, \n                        width: targetShape.width, \n                        height: targetShape.height \n                      });\n                      setSnackbar({ open: true, message: 'Image fitted to shape!', severity: 'success' });\n                    } else {\n                      setSnackbar({ open: true, message: 'Add a shape first to fit the image into', severity: 'info' });\n                    }\n                  }}\n                  sx={{ mb: 1 }}\n                >\n                  Fit to Last Shape\n                </Button>\n                <Box sx={{ display: 'flex', gap: 1 }}>\n                  <Button \n                    size=\"small\" \n                    variant=\"outlined\"\n                    onClick={() => updateElement(selectedEl.id, { width: 100, height: 100 })}\n                  >\n                    100x100\n                  </Button>\n                  <Button \n                    size=\"small\" \n                    variant=\"outlined\"\n                    onClick={() => updateElement(selectedEl.id, { width: 150, height: 150 })}\n                  >\n                    150x150\n                  </Button>\n                  <Button \n                    size=\"small\" \n                    variant=\"outlined\"\n                    onClick={() => updateElement(selectedEl.id, { width: 200, height: 200 })}\n                  >\n                    200x200\n                  </Button>\n                </Box>\n              </>\n            )}\n            \n            {/* Text Properties */}\n            {selectedEl.type === ELEMENT_TYPES.TEXT && (\n              <>\n                <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>Text</Typography>\n                <TextField size=\"small\" fullWidth multiline rows={2} value={selectedEl.text} onChange={(e) => updateElement(selectedEl.id, { text: e.target.value })} sx={{ mb: 1 }} />\n                <FormControl size=\"small\" fullWidth sx={{ mb: 1 }}>\n                  <InputLabel>Font</InputLabel>\n                  <Select value={selectedEl.fontFamily} label=\"Font\" onChange={(e) => updateElement(selectedEl.id, { fontFamily: e.target.value })}>\n                    {FONTS.map(f => <MenuItem key={f} value={f} sx={{ fontFamily: f }}>{f}</MenuItem>)}\n                  </Select>\n                </FormControl>\n                <TextField size=\"small\" label=\"Size\" type=\"number\" value={selectedEl.fontSize} onChange={(e) => updateElement(selectedEl.id, { fontSize: parseInt(e.target.value) || 12 })} sx={{ mb: 1 }} />\n                <Box sx={{ display: 'flex', gap: 0.5, mb: 1 }}>\n                  <ToggleButton size=\"small\" value=\"bold\" selected={selectedEl.bold} onChange={() => updateElement(selectedEl.id, { bold: !selectedEl.bold })}><BoldIcon /></ToggleButton>\n                  <ToggleButton size=\"small\" value=\"italic\" selected={selectedEl.italic} onChange={() => updateElement(selectedEl.id, { italic: !selectedEl.italic })}><ItalicIcon /></ToggleButton>\n                  <ToggleButton size=\"small\" value=\"left\" selected={selectedEl.align === 'left'} onChange={() => updateElement(selectedEl.id, { align: 'left' })}><AlignLeftIcon /></ToggleButton>\n                  <ToggleButton size=\"small\" value=\"center\" selected={selectedEl.align === 'center'} onChange={() => updateElement(selectedEl.id, { align: 'center' })}><AlignCenterIcon /></ToggleButton>\n                  <ToggleButton size=\"small\" value=\"right\" selected={selectedEl.align === 'right'} onChange={() => updateElement(selectedEl.id, { align: 'right' })}><AlignRightIcon /></ToggleButton>\n                </Box>\n                <Typography variant=\"subtitle2\" sx={{ mt: 1 }}>Text Color</Typography>\n                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mb: 1 }}>\n                  {COLOR_PRESETS.slice(0, 12).map(c => (\n                    <Box key={c} sx={{ width: 20, height: 20, bgcolor: c, cursor: 'pointer', border: selectedEl.color === c ? '2px solid #000' : '1px solid #ccc' }} onClick={() => updateElement(selectedEl.id, { color: c })} />\n                  ))}\n                </Box>\n              </>\n            )}\n            \n            {/* Shape Properties - Shapes with Fill and Stroke */}\n            {[ELEMENT_TYPES.RECTANGLE, ELEMENT_TYPES.CIRCLE, ELEMENT_TYPES.TRIANGLE, ELEMENT_TYPES.STAR].includes(selectedEl.type) && (\n              <>\n                <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>Colors</Typography>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                  <Typography variant=\"caption\" sx={{ width: 40 }}>Fill:</Typography>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                    {COLOR_PRESETS.slice(0, 12).map(c => (\n                      <Box key={c} sx={{ width: 20, height: 20, bgcolor: c, cursor: 'pointer', border: selectedEl.fill === c ? '2px solid #000' : '1px solid #ccc' }} onClick={() => updateElement(selectedEl.id, { fill: c })} />\n                    ))}\n                  </Box>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <Typography variant=\"caption\" sx={{ width: 40 }}>Stroke:</Typography>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                    {COLOR_PRESETS.slice(0, 12).map(c => (\n                      <Box key={c} sx={{ width: 20, height: 20, bgcolor: c, cursor: 'pointer', border: selectedEl.stroke === c ? '2px solid #000' : '1px solid #ccc' }} onClick={() => updateElement(selectedEl.id, { stroke: c })} />\n                    ))}\n                  </Box>\n                </Box>\n              </>\n            )}\n            \n            {/* Line and Arrow Properties - Stroke only */}\n            {[ELEMENT_TYPES.LINE, ELEMENT_TYPES.ARROW].includes(selectedEl.type) && (\n              <>\n                <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>Line Color</Typography>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <Typography variant=\"caption\" sx={{ width: 40 }}>Color:</Typography>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                    {COLOR_PRESETS.slice(0, 12).map(c => (\n                      <Box key={c} sx={{ width: 20, height: 20, bgcolor: c, cursor: 'pointer', border: selectedEl.stroke === c ? '2px solid #000' : '1px solid #ccc' }} onClick={() => updateElement(selectedEl.id, { stroke: c })} />\n                    ))}\n                  </Box>\n                </Box>\n              </>\n            )}\n            \n            <Divider sx={{ my: 2 }} />\n            \n            {/* Actions */}\n            <Typography variant=\"subtitle2\">Actions</Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 1 }}>\n              <Tooltip title=\"Bring to Front\"><IconButton size=\"small\" onClick={() => bringToFront(selectedEl.id)}><BringFrontIcon /></IconButton></Tooltip>\n              <Tooltip title=\"Send to Back\"><IconButton size=\"small\" onClick={() => sendToBack(selectedEl.id)}><SendBackIcon /></IconButton></Tooltip>\n              <Tooltip title=\"Duplicate\"><IconButton size=\"small\" onClick={() => duplicateElement(selectedEl)}><CopyIcon /></IconButton></Tooltip>\n              <Tooltip title={selectedEl.locked ? \"Unlock\" : \"Lock\"}><IconButton size=\"small\" onClick={() => toggleLock(selectedEl.id)}>{selectedEl.locked ? <LockIcon /> : <UnlockIcon />}</IconButton></Tooltip>\n              <Tooltip title=\"Delete\"><IconButton size=\"small\" color=\"error\" onClick={() => deleteElement(selectedEl.id)}><DeleteIcon /></IconButton></Tooltip>\n            </Box>\n          </>\n        ) : (\n          <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 2 }}>Select an element to edit its properties</Typography>\n        )}\n        \n        <Box sx={{ flex: 1 }} />\n        \n        {/* Page Info */}\n        <Divider sx={{ my: 2 }} />\n        <Typography variant=\"caption\" color=\"textSecondary\">\n          Page Size: {canvasSize.width}  {canvasSize.height}px<br/>\n          Elements: {elements.length}\n        </Typography>\n      </Paper>\n      \n      {/* Save Dialog */}\n      <Dialog open={saveDialog} onClose={() => setSaveDialog(false)}>\n        <DialogTitle>Save Design</DialogTitle>\n        <DialogContent>\n          <TextField fullWidth label=\"Design Name\" value={designName} onChange={(e) => setDesignName(e.target.value)} sx={{ mt: 1 }} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setSaveDialog(false)}>Cancel</Button>\n          <Button variant=\"outlined\" onClick={handleSave} sx={{ color: '#1976d2', '&:hover': { color: '#000000', backgroundColor: 'rgba(25, 118, 210, 0.04)' } }}>Save</Button>\n        </DialogActions>\n      </Dialog>\n      \n      {/* Load Dialog */}\n      <Dialog open={loadDialog} onClose={() => setLoadDialog(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Load Design</DialogTitle>\n        <DialogContent>\n          {savedDesigns.length === 0 ? (\n            <Typography color=\"textSecondary\">No saved designs found</Typography>\n          ) : (\n            <List>\n              {savedDesigns.map(design => {\n                const dateStr = design.created_at || design.createdAt;\n                let dateDisplay = '';\n                if (design.isSystem) {\n                  dateDisplay = 'System Template';\n                } else if (dateStr) {\n                  try {\n                    const date = new Date(dateStr);\n                    dateDisplay = isNaN(date.getTime()) ? '' : date.toLocaleString();\n                  } catch {\n                    dateDisplay = '';\n                  }\n                }\n                const isSystemTemplate = design.isSystem || design.id?.toString().startsWith('seed-');\n                return (\n                  <ListItem \n                    key={design.id} \n                    button \n                    onClick={() => handleLoad(design)}\n                    secondaryAction={\n                      !isSystemTemplate && (\n                        <IconButton \n                          edge=\"end\" \n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteSaved(design.id);\n                          }}\n                          color=\"error\"\n                          size=\"small\"\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      )\n                    }\n                  >\n                    <ListItemText \n                      primary={design.name} \n                      secondary={`${design.pageSize || 'A4'}${dateDisplay ? `  ${dateDisplay}` : ''}`}\n                      primaryTypographyProps={{ fontWeight: isSystemTemplate ? 500 : 400 }}\n                    />\n                  </ListItem>\n                );\n              })}\n            </List>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setLoadDialog(false)}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n      \n      {/* Snackbar */}\n      <Snackbar open={snackbar.open} autoHideDuration={3000} onClose={() => setSnackbar({ ...snackbar, open: false })}>\n        <Alert severity={snackbar.severity}>{snackbar.message}</Alert>\n      </Snackbar>\n    </Box>\n  );\n});\n\nexport default UnifiedMaker;\n","/**\n * Utility functions for UnifiedMaker component\n */\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n\n/**\n * Convert image URL to base64 (for reliable export)\n */\nexport const imageUrlToBase64 = async (url) => {\n  try {\n    // Use proxy endpoint for R2 images\n    const proxyUrl = `${BACKEND_URL}/api/rest/images/proxy?url=${encodeURIComponent(url)}`;\n    \n    const response = await fetch(proxyUrl);\n    if (!response.ok) throw new Error('Failed to fetch image');\n    \n    const blob = await response.blob();\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  } catch (error) {\n    console.warn('Could not convert to base64, using original URL:', error);\n    return url; // Fall back to original URL\n  }\n};\n\n/**\n * Generate unique ID for elements\n */\nexport const generateId = () => {\n  return `element_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n};\n\n/**\n * Calculate element bounds\n */\nexport const getElementBounds = (element) => {\n  return {\n    left: element.x,\n    top: element.y,\n    right: element.x + (element.width || 0),\n    bottom: element.y + (element.height || 0),\n    centerX: element.x + (element.width || 0) / 2,\n    centerY: element.y + (element.height || 0) / 2\n  };\n};\n\n/**\n * Check if point is inside element\n */\nexport const isPointInElement = (x, y, element) => {\n  const bounds = getElementBounds(element);\n  return x >= bounds.left && x <= bounds.right && y >= bounds.top && y <= bounds.bottom;\n};\n\n/**\n * Snap value to grid\n */\nexport const snapToGrid = (value, gridSize = 10) => {\n  return Math.round(value / gridSize) * gridSize;\n};\n\n/**\n * Clone element with new ID\n */\nexport const cloneElement = (element) => {\n  return {\n    ...element,\n    id: generateId(),\n    x: element.x + 20,\n    y: element.y + 20\n  };\n};\n\n/**\n * Export canvas to image (requires html2canvas to be passed as parameter)\n */\nexport const exportCanvasToImage = async (canvasRef, html2canvasLib, filename = 'design.png') => {\n  if (!canvasRef || !html2canvasLib) return null;\n  \n  try {\n    const canvas = await html2canvasLib(canvasRef, {\n      backgroundColor: '#ffffff',\n      scale: 2,\n      useCORS: true,\n      allowTaint: true,\n      logging: false\n    });\n    \n    const dataUrl = canvas.toDataURL('image/png');\n    return dataUrl;\n  } catch (error) {\n    console.error('Error exporting canvas:', error);\n    throw error;\n  }\n};\n\n/**\n * Download data URL as file\n */\nexport const downloadDataUrl = (dataUrl, filename) => {\n  const link = document.createElement('a');\n  link.download = filename;\n  link.href = dataUrl;\n  link.click();\n};\n\n/**\n * Calculate resize handle position\n */\nexport const getResizeHandles = (element) => {\n  const size = 8;\n  const halfSize = size / 2;\n  \n  return {\n    nw: { x: element.x - halfSize, y: element.y - halfSize, cursor: 'nw-resize' },\n    n: { x: element.x + element.width / 2 - halfSize, y: element.y - halfSize, cursor: 'n-resize' },\n    ne: { x: element.x + element.width - halfSize, y: element.y - halfSize, cursor: 'ne-resize' },\n    e: { x: element.x + element.width - halfSize, y: element.y + element.height / 2 - halfSize, cursor: 'e-resize' },\n    se: { x: element.x + element.width - halfSize, y: element.y + element.height - halfSize, cursor: 'se-resize' },\n    s: { x: element.x + element.width / 2 - halfSize, y: element.y + element.height - halfSize, cursor: 's-resize' },\n    sw: { x: element.x - halfSize, y: element.y + element.height - halfSize, cursor: 'sw-resize' },\n    w: { x: element.x - halfSize, y: element.y + element.height / 2 - halfSize, cursor: 'w-resize' }\n  };\n};\n"],"names":["createSvgIcon","_jsx","d","ELEMENT_TYPES","TEXT","IMAGE","RECTANGLE","CIRCLE","TRIANGLE","LINE","STAR","ARROW","PAGE_SIZES","width","height","label","COLOR_PRESETS","FONTS","UnifiedMaker","forwardRef","_ref","ref","makerType","templates","onSave","onLoad","isLoggedin","accessToken","useSelector","state","login","pageSize","setPageSize","useNavigate","useState","customSize","setCustomSize","canvasBg","setCanvasBg","zoom","setZoom","showGrid","setShowGrid","elements","setElements","selectedElement","setSelectedElement","history","setHistory","historyIndex","setHistoryIndex","isDragging","setIsDragging","dragStart","setDragStart","x","y","dragElementStart","setDragElementStart","wasDraggingRef","useRef","isResizing","setIsResizing","resizeHandle","setResizeHandle","resizeStart","setResizeStart","elementX","elementY","leftTab","setLeftTab","colorPickerAnchor","setColorPickerAnchor","colorPickerTarget","setColorPickerTarget","snackbar","setSnackbar","open","message","severity","saveDialog","setSaveDialog","loadDialog","setLoadDialog","designName","setDesignName","savedDesigns","setSavedDesigns","templatesLoading","setTemplatesLoading","imageBankImages","setImageBankImages","imageBankCategory","setImageBankCategory","imageBankLoading","setImageBankLoading","imageBankSearch","setImageBankSearch","canvasRef","fileInputRef","fileInputRefImages","getCanvasSize","fetchTemplates","useCallback","async","backendUrl","process","response","fetch","concat","headers","Authorization","ok","data","json","error","console","useEffect","fetchImageBankImages","searchTerm","arguments","length","undefined","encodeURIComponent","images","results","map","item","path","filter","url","toLowerCase","endsWith","debounceTimer","setTimeout","clearTimeout","handleKeyDown","e","locked","target","tagName","isContentEditable","MOVE_STEP","shiftKey","newX","newY","moved","key","preventDefault","match","deleteElement","id","updateElement","window","addEventListener","removeEventListener","saveToHistory","newElements","newHistory","slice","push","JSON","stringify","handleMouseDown","element","stopPropagation","clientX","clientY","handleMouseMove","dx","dy","zoomFactor","handleMouseUp","current","handleResizeMove","newWidth","newHeight","includes","Math","max","handleResizeEnd","renderResizeHandles","handleStyle","position","backgroundColor","border","borderRadius","zIndex","boxShadow","pointerEvents","style","top","left","cursor","right","bottom","transform","h","Box","sx","_objectSpread","onMouseDown","handleResizeStart","handle","handleClearCanvas","addElement","type","props","canvasSize","Date","now","finalProps","src","startsWith","base64Src","proxyUrl","Error","blob","Promise","resolve","reject","reader","FileReader","onloadend","result","onerror","readAsDataURL","warn","imageUrlToBase64","originalSrc","newElement","rotation","getDefaultProps","text","fontSize","fontFamily","color","bold","italic","align","fill","stroke","strokeWidth","points","updates","el","rotateElement","degrees","find","handleImageUpload","file","files","onload","event","value","handleExport","format","wasSelected","imageElements","querySelectorAll","originalSrcs","all","Array","from","img","index","imgCanvas","document","createElement","ctx","getContext","tempImg","Image","crossOrigin","naturalWidth","naturalHeight","drawImage","toDataURL","canvas","html2canvas","scale","useCORS","allowTaint","logging","imageTimeout","foreignObjectRendering","removeContainer","onclone","clonedDoc","forEach","remove","s","outline","visibility","link","download","href","body","appendChild","click","removeChild","handlePrint","printWindow","write","close","print","handleLoad","design","name","handleDeleteSaved","toString","method","useImperativeHandle","export","clear","save","load","selectedEl","mobileMenuOpen","setMobileMenuOpen","innerWidth","_jsxs","display","flexDirection","xs","md","minHeight","overflow","bgcolor","children","p","justifyContent","alignItems","Typography","variant","Button","size","onClick","Paper","maxHeight","Tabs","onChange","v","minWidth","Tab","flex","_Fragment","gutterBottom","Grid","container","spacing","mb","fullWidth","py","RectangleIcon","CircleIcon","TriangleIcon","StarIcon","LineIcon","ArrowIcon","Divider","my","startIcon","TextIcon","UploadIcon","_fileInputRef$current","accept","FormControl","Select","Object","entries","_ref2","val","MenuItem","gap","TextField","parseInt","flexWrap","List","dense","_design$id","dateStr","created_at","createdAt","dateDisplay","isSystem","date","isNaN","getTime","toLocaleDateString","_unused","isSystemTemplate","ListItem","button","secondaryAction","IconButton","edge","DeleteIcon","ListItemText","primary","secondary","primaryTypographyProps","fontWeight","placeholder","InputProps","startAdornment","SearchIcon","mr","overflowY","CircularProgress","i","Card","CardMedia","component","image","objectFit","_fileInputRefImages$c","overflowX","Tooltip","title","handleNewDesign","NewIcon","orientation","flexItem","sm","handleUndo","parse","disabled","UndoIcon","handleRedo","RedoIcon","ClearIcon","ZoomOutIcon","textAlign","min","ZoomInIcon","GridIcon","displayEmpty","PrintIcon","SaveIcon","LoadIcon","DownloadIcon","backgroundImage","backgroundSize","commonStyle","boxSizing","userSelect","wrapWithResizeHandles","content","fontStyle","alt","draggable","background","viewBox","preserveAspectRatio","x1","y1","x2","y2","markerWidth","markerHeight","refX","refY","orient","markerEnd","renderElement","mt","round","Slider","shapes","targetShape","multiline","rows","InputLabel","f","ToggleButton","selected","BoldIcon","ItalicIcon","AlignLeftIcon","AlignCenterIcon","AlignRightIcon","c","bringToFront","BringFrontIcon","sendToBack","SendBackIcon","duplicateElement","CopyIcon","toggleLock","LockIcon","UnlockIcon","Dialog","onClose","DialogTitle","DialogContent","DialogActions","trim","maxWidth","_design$id2","toLocaleString","_unused2","Snackbar","autoHideDuration","Alert"],"ignoreList":[],"sourceRoot":""}