"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[573],{8573(e,s,t){t.r(s),t.d(s,{default:()=>C});var i=t(65043),a=t(59314),l=t(46946),o=t(94496),n=t(97334),c=t(8591),r=t(60960),d=t(65204),x=t(91068),h=t(42492),A=t(68738),j=t(39652),v=t(21832),u=t(26487),m=t(79456),y=t(56263),f=t(37912),p=t(37991),S=t(76300),g=t(41132),z=t(61958),b=t(70579);const w="https://portal.myschoolct.com",T=e=>{let{title:s,value:t,icon:i,color:n,subtitle:c}=e;return(0,b.jsx)(a.A,{sx:{p:2,height:"100%"},children:(0,b.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,b.jsxs)(l.A,{children:[(0,b.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",children:s}),(0,b.jsx)(o.A,{variant:"h4",children:t}),c&&(0,b.jsx)(o.A,{variant:"caption",color:n,children:c})]}),(0,b.jsx)(l.A,{sx:{color:n,opacity:.8},children:i})]})})},C=()=>{const[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)([]),[C,D]=(0,i.useState)(null),[L,M]=(0,i.useState)(!0),{accessToken:U,userRole:V}=(0,m.d4)(e=>e.login),_="SUPER_ADMIN"===V;(0,i.useEffect)(()=>{(async()=>{if(U)try{M(!0);const e=await y.A.get("".concat(w,"/api/admin/dashboard-stats"),{headers:{Authorization:"Bearer ".concat(U)}});s(e.data);const t=await y.A.get("".concat(w,"/api/admin/user-logs?limit=10"),{headers:{Authorization:"Bearer ".concat(U)}});a(t.data.logs||[]);const i=await y.A.get("".concat(w,"/api/admin/user-logs/stats"),{headers:{Authorization:"Bearer ".concat(U)}});D(i.data)}catch(e){console.error("Error fetching analytics:",e)}finally{M(!1)}})()},[U]);return L?(0,b.jsx)(l.A,{className:"analyticsContainer",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh",width:"100%"},children:(0,b.jsx)(n.A,{size:50})}):(0,b.jsxs)(l.A,{className:"analyticsContainer",sx:{p:3},children:[(0,b.jsx)(o.A,{variant:"h5",gutterBottom:!0,children:_?"Analytics Dashboard":"School Analytics Dashboard"}),(0,b.jsxs)(c.Ay,{container:!0,spacing:3,sx:{mb:3},children:[_&&(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsx)(T,{title:"Total Schools",value:(null===e||void 0===e?void 0:e.totalSchools)||0,icon:(0,b.jsx)(S.A,{sx:{fontSize:40}}),color:"#1976d2"})}),(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:_?3:4,children:(0,b.jsx)(T,{title:_?"Total Teachers":"School Teachers",value:(null===e||void 0===e?void 0:e.totalTeachers)||0,icon:(0,b.jsx)(p.A,{sx:{fontSize:40}}),color:"#2e7d32"})}),(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:_?3:4,children:(0,b.jsx)(T,{title:_?"Total Students":"School Students",value:(null===e||void 0===e?void 0:e.totalStudents)||0,icon:(0,b.jsx)(p.A,{sx:{fontSize:40}}),color:"#ed6c02"})}),(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:_?3:4,children:(0,b.jsx)(T,{title:"Total Downloads",value:(null===e||void 0===e?void 0:e.totalCreditsUsed)||0,icon:(0,b.jsx)(g.A,{sx:{fontSize:40}}),color:"#9c27b0"})})]}),(0,b.jsx)(o.A,{variant:"h6",sx:{mb:2},children:"Today's Activity"}),(0,b.jsxs)(c.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsx)(T,{title:"Today's Logins",value:(null===C||void 0===C?void 0:C.todays_activity)||0,icon:(0,b.jsx)(f.A,{sx:{fontSize:40}}),color:"#00bcd4"})}),(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsx)(T,{title:"Today's Downloads",value:(null===C||void 0===C?void 0:C.total_downloads)||0,icon:(0,b.jsx)(g.A,{sx:{fontSize:40}}),color:"#ff9800"})}),(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsx)(T,{title:"Recent Activity",value:(null===C||void 0===C?void 0:C.recent_activity_count)||0,icon:(0,b.jsx)(p.A,{sx:{fontSize:40}}),color:"#4caf50"})}),(0,b.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsx)(T,{title:"Total Users",value:(null===e||void 0===e?void 0:e.totalUsers)||0,icon:(0,b.jsx)(z.A,{sx:{fontSize:40}}),color:"#607d8b"})})]}),(0,b.jsx)(o.A,{variant:"h6",sx:{mb:2},children:"Recent Activity"}),(0,b.jsx)(r.A,{component:d.A,children:(0,b.jsxs)(x.A,{size:"small",children:[(0,b.jsx)(h.A,{children:(0,b.jsxs)(A.A,{children:[(0,b.jsx)(j.A,{children:"Time"}),(0,b.jsx)(j.A,{children:"User"}),(0,b.jsx)(j.A,{children:"Action"}),(0,b.jsx)(j.A,{children:"Details"})]})}),(0,b.jsx)(v.A,{children:0===t.length?(0,b.jsx)(A.A,{children:(0,b.jsx)(j.A,{colSpan:4,align:"center",children:"No recent activity"})}):t.map((e,s)=>{return(0,b.jsxs)(A.A,{children:[(0,b.jsx)(j.A,{children:new Date(e.timestamp).toLocaleString()}),(0,b.jsxs)(j.A,{children:[(0,b.jsx)(o.A,{variant:"body2",children:e.user||e.user_name||"Unknown"}),(0,b.jsx)(o.A,{variant:"caption",color:"text.secondary",children:e.email||e.user_email})]}),(0,b.jsx)(j.A,{children:(0,b.jsx)(u.A,{label:e.action,size:"small",color:(t=e.action,{login:"success",logout:"default",download:"primary",upload:"secondary"}[t]||"default")})}),(0,b.jsx)(j.A,{children:e.details||"-"})]},s);var t})})]})})]})}},37912(e,s,t){var i=t(24994);s.A=void 0;var a=i(t(40039)),l=t(70579);s.A=(0,a.default)((0,l.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},37991(e,s,t){var i=t(24994);s.A=void 0;var a=i(t(40039)),l=t(70579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},41132(e,s,t){var i=t(24994);s.A=void 0;var a=i(t(40039)),l=t(70579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},61958(e,s,t){var i=t(24994);s.A=void 0;var a=i(t(40039)),l=t(70579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History")},76300(e,s,t){var i=t(24994);s.A=void 0;var a=i(t(40039)),l=t(70579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"}),"School")}}]);
//# sourceMappingURL=573.158fa09c.chunk.js.map